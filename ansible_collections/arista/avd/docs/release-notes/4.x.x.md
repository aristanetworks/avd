---
# This title is used for search results
title: Release Notes for AVD 4.x.x
---
<!--
  ~ Copyright (c) 2023-2024 Arista Networks, Inc.
  ~ Use of this source code is governed by the Apache License 2.0
  ~ that can be found in the LICENSE file.
  -->

# Release Notes for AVD 4.x.x

- Documentation for AVD version `4.x.x` [available here](https://avd.arista.com/4.10/)

## Release 4.10.0

### Deprecations

- In AVD version 5.0.0, the `eos_designs.jsonschema.json` and `eos_cli_config_gen.jsonschema.json` will no longer be generated. These schemas are not being used and have never been complete.
- In AVD version 5.0.0, the support for old "dict-of-dicts" data models with user-defined keys will be removed.
  See details on how to migrate to the new data models in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#data-model-changes-from-dict-of-dicts-to-list-of-dicts).

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Fixing the wrong CLI generated for radius-server dynamic-authorizaton by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4224
- Fix(eos_cli_config_gen): Restoring consistent schema validation behavior by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4261
- Fix(eos_cli_config_gen): Add a pseudo task to handle tags on import role by @gmuloc in https://github.com/aristanetworks/avd/pull/4258

### Other Fixed issues

- Fix(plugins): Fix deprecation warning after reformatting by @gmuloc in https://github.com/aristanetworks/avd/pull/4183
- Fix(eos_validate_state): Sanitize markdown output on markdown validation report  by @nathanmusser in https://github.com/aristanetworks/avd/pull/4212
- Fix(plugins): Prevent deprecation warnings when deprecated filters are not used by @gmuloc in https://github.com/aristanetworks/avd/pull/4199
- Fix: Incorrect default value for 720XP for trident_forwarding_table_partition by @carlbuchmann in https://github.com/aristanetworks/avd/pull/4215
- Fix: Typo in requirements.txt for PyAVD dev0 version by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4248

### Documentation

- Doc: Deprecate the eos_designs and eos_cli_config_gen jsonschema.jsonâ€¦ by @gmuloc in https://github.com/aristanetworks/avd/pull/4195
- Doc: AVD with Ansible Automation Platform Guide by @JulioPDX in https://github.com/aristanetworks/avd/pull/3910
- Doc(eos_designs): Remove lookup plugin reference for Zscaler IE by @gmuloc in https://github.com/aristanetworks/avd/pull/4234
- Doc: Fix incorrect keys specified in default_mgmt_method by @carlbuchmann in https://github.com/aristanetworks/avd/pull/4206
- Doc(eos_designs): Replace wrong key referred in documentation `mlag_l3_peer_vlan` with `mlag_peer_l3_vlan` by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4251
- Doc(eos_designs): Update documentation to customize WAN flow tracking. by @gmuloc in https://github.com/aristanetworks/avd/pull/4253
- Doc(eos_designs): Add warning about WAN BGP peer groups password by @gmuloc in https://github.com/aristanetworks/avd/pull/4265

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): Add TLS options for radius_server by @nnbruce in https://github.com/aristanetworks/avd/pull/4194
- Feat(eos_cli_config_gen): Add support for tunnel-interface underlay vrf by @nathanmusser in https://github.com/aristanetworks/avd/pull/4211
- Feat(eos_cli_config_gen): Add support to configure PEG DR election algorithm by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4095
- Feat(eos_cli_config_gen): Add MPLS Tunnel Support for Traceroute and PMTU Discovery by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4219
- Feat(eos_cli_config_gen): SyncE support by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/4255
- Feat(eos_cli_config_gen): Add dscp support for application traffic recognition IPv4 by @gmuloc in https://github.com/aristanetworks/avd/pull/4241
- Feat(eos_cli_config_gen): Add ptp profiles for ITU-T G8275 support by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/4230
- Feat(eos_cli_config_gen): Enhance DHCP server data model (lease time, reservations, eos_cli) by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4252

### New features and enhancements in eos_designs

- Feat(eos_designs): Add option for ip igmp snooping fast-leave by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4180
- Feat(eos_designs): Add `ptp_settings` to replace `ptp` key in eos_designs by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4155
- Feat(eos_designs): Enhance custom IP addressing and descriptions for p2p-vrfs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4259
- Feat(eos_designs): MLAG secondary should use short-esi from MLAG primary by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4172
- Feat(eos_designs): Add keys to set loopback0 and vtep_loopback directly by @gmuloc in https://github.com/aristanetworks/avd/pull/4168
- Feat(eos_designs): Add support to add access-groups on l3-interfaces through network-services by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4163
- Feat(eos_designs): Underlay OSPF authentication by @jonxstill in https://github.com/aristanetworks/avd/pull/4169

### Other new features and enhancements

- Feat(cv_deploy): Add CV Pathfinder AVT hop count to metadata studio by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4071
- Feat(cv_deploy): Add application data to CV Pathfinder metadata by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4247

### PyAVD Changes

- Refactor(pyavd): Suppress warnings for cryptography >=43.0.0 by @gmuloc in https://github.com/aristanetworks/avd/pull/4235
- Refactor(pyavd): Clean unused code requiring referencing library by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4269

### Other Changes

- Bump: Update version 4.10.0-dev0 by @carlbuchmann in https://github.com/aristanetworks/avd/pull/4184
- Refactor(eos_validate_state): Add warning for ansible test mode by @gmuloc in https://github.com/aristanetworks/avd/pull/4173
- Refactor(eos_designs,eos_cli_config_gen): Deprecate type conversion from dict-of-dicts to list-of-dicts by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4237
- Refactor(eos_cli_config_gen): Add primary key for connectivity monitor hosts by @gmuloc in https://github.com/aristanetworks/avd/pull/4264

## Release 4.9.0

### Breaking or behavioral changes in eos_designs

Breaking changes may require modifications to the inventory or playbook.

#### Removed the BGP outbound route-map for eBGP LAN on WAN routers

The eBGP LAN feature for WAN routers introduced in AVD 4.7.0 is not working for connected and static redistributed routes inside a VRF (outside of the VRF default) as the RM-BGP-UNDERLAY-PEERS-OUT outbound route-map would not match these routes.
Similarly the routes coming from an eBGP peering in any VRF (including default) would be blocked out by the route-map.

For these reasons, the route-map was removed as a bug fix.

To keep the broken route-map, `structured_config` can be used.

Pull request:

- Fix(eos_designs)!: Remove eBGP LAN outbound route-map for WAN by @gmuloc in https://github.com/aristanetworks/avd/pull/4107

### Changes to requirements

- The Ansible collection `arista.avd` now only requires `pyavd[ansible]` which will install all other Python dependencies.<br>
  Note that the version of `pyavd` **must** match the version of the `arista.avd` collection.

### Deprecations

- AVD version 5.0.0 will drop support for Python version 3.9. The decision has been taken to remove Python version 3.9 support in AVD collection to anticipate its removal in `ansible-core`.
  `ansible-core` version 2.15 End-Of-Life is scheduled for November 2024 and it will be the last `ansible-core` version supporting Python version 3.9 as documented here: https://docs.ansible.com/ansible/latest/reference_appendices/release_and_maintenance.html#ansible-core-support-matrix.

- The following Ansible plugins are no longer being used by AVD and have been deprecated for removal in AVD 5.0.0. See the plugin docs for possible replacements.

  Filters:

  - `arista.avd.generate_esi`
  - `arista.avd.generate_lacp_id`
  - `arista.avd.generate_route_target`

  Action plugins / Modules:

  - `arista.avd.batch_template`
  - `arista.avd.validate_and_template`
  - `arista.avd.yaml_templates_to_facts`

- Starting AVD 5.0.0, `eos_validate_state` will use ANTA as backend, which will change the default behavior (same as setting `use_anta: true` in older versions).
  Please review the changes described on the ANTA integration page.

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Fix the templates for event-handlers by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4055
- Fix(eos_cli_config_gen): BGP models has supress-map which is not present in EOS commands. by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4054
- Fix(eos_cli_config_gen): Fix MSDP template typo for sa_filter.out_list by @gusmb in https://github.com/aristanetworks/avd/pull/4161

### Fixed issues in eos_designs

- Fix(eos_designs): Inband mgmt route-map and prefix-list should not be applied without overlay_routing_protocol by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4045
- Fix(eos_designs): core_interfaces generates invalid config if ASN is not defined for the p2p_links/p2p_links_profiles by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4046
- Fix(eos_designs): Address ipv4_acl_in/out not working for WAN l3 subinterfaces by @gmuloc in https://github.com/aristanetworks/avd/pull/4116
- Fix(eos_designs): WAN Exclude interface IP address from direct internet-exit NAT ACL by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/4096

### Other Fixed issues

- Fix(containers): Add "remoteUser": "avd" to devcontainer by @carlbuchmann in https://github.com/aristanetworks/avd/pull/4043
- Fix(eos_validate_state): Update error message when a device does not have httpapi _sub_plugin by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4049
- Fix(cv_deploy): Improve SWG API handling for Zscaler internet exit by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4090
- Fix: Adjust inventory group names in molecule tests to follow Ansible guidelines by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4097
- Fix: Change the required arguments for eos_cli_config_gen action plugin by @gmuloc in https://github.com/aristanetworks/avd/pull/4152

### Documentation

- Doc: Fix mkdocs broken requirement links in roles by @gmuloc in https://github.com/aristanetworks/avd/pull/4039
- Doc: Contribution Guide Updates by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3766
- Doc: Add notes about using cv_deploy for CV Pathfinder by @gmuloc in https://github.com/aristanetworks/avd/pull/4044
- Doc(eos_cli_config_gen): Include docs for router segment-security by @jonxstill in https://github.com/aristanetworks/avd/pull/4059
- Doc: Minor updates to Development Tooling guide. by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4067
- Doc: Update installation guide with PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4076
- Doc: Minor grammar edits. by @blitzeditor in https://github.com/aristanetworks/avd/pull/3362
- Doc: Added the table of WAN validation by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4125
- Doc: Semantic Versioning by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3417
- Doc: add CVaaS regional URLs to cv_deploy by @noredistribution in https://github.com/aristanetworks/avd/pull/4092

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): Add support for Postcard telemetry by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3642
- Feat(eos_cli_config_gen): Add option for `ospf_type` when redistributing OSPF into BGP by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4029
- Feat(eos_cli_config_gen): Add support for MACsec fallback to unprotected traffic by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4028
- Feat(eos_cli_config_gen): Add Patch-Panel Connector commands by @ccsnw in https://github.com/aristanetworks/avd/pull/4063
- Feat(eos_cli_config_gen): Add support for 'no bgp redistribute-internal' by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4033
- Feat(eos_cli_config_gen): Add support for Router BGP missing-policy for address-family all by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4034
- Feat(eos_cli_config_gen): Add support for dot1x captive portal and supplicant commands by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4023
- Feat(eos_cli_config_gen): Adding option for arp cache persistent and arp persistent refresh-delay by @bjmeuer in https://github.com/aristanetworks/avd/pull/4109
- Feat(eos_cli_config_gen): Support of static IPv6 neighbor entries by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4075
- Feat(eos_cli_config_gen): Add support for permit response traffic nat under ip acls by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4128
- Feat(eos_cli_config_gen): Support of BGP default-originate per VRF #3941 by @mmaaloul in https://github.com/aristanetworks/avd/pull/4122

### New features and enhancements in eos_designs

- Feat(eos_designs): Add support for 'uplink_mtu' under node config by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4040
- Feat(eos_designs): Add platform settings for WAN devices by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/4027
- Feat(eos_designs): Disable per interface MTU for 7010TX by @xaviramon in https://github.com/aristanetworks/avd/pull/4053
- Feat(eos_designs): Allow reuse of cross-device BGP peer ip by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4050
- Feat(eos_designs): Allow 'evpn_vlan_bundle' to be set up at tenant level by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4093
- Feat(eos_designs): Enforce unicity of region IDs and per-region site IDs for CV Pathfinder by @gmuloc in https://github.com/aristanetworks/avd/pull/4121
- Feat(eos_designs): Add support for directly connected WAN HA by @gmuloc in https://github.com/aristanetworks/avd/pull/3720
- Feat(eos_designs): Add support to enable BGP peering with wan provider by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/4079

### Other new features and enhancements

- Feat(eos_validate_state): Added the validation for IP security connections by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3911
- Feat(eos_validate_state): Added the validation for STUN client configurations by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3898
- Feat(containers): switch to pyavd and editable install for container build by @ankudinov in https://github.com/aristanetworks/avd/pull/4087
- Feat(eos_validate_state): Add support for ANTA v1.0.0 by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/4123

### PyAVD Changes

- Bump(pyavd): Add support for Python 3.9 in PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4051

### Other Changes

- Refactor(plugins): Move jinja filter code for `arista.avd.default` to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4047
- Refactor(eos_cli_config_gen): Addressed missed comments for patch-panel by @gmuloc in https://github.com/aristanetworks/avd/pull/4078
- Refactor(plugins): Move jinja filter code for arista.avd.natural_sort to PyAVD by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4068
- Refactor(plugins): Move jinja filter code for arista.avd.convert_dicts to PyAVD by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4069
- Refactor(plugins): Move jinja filter code for arista.avd.list_compress to PyAVD by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4099
- Refactor(plugins): Move jinja filter code for arista.avd.generate_route_target to PyAVD by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4101
- Refactor(plugins): Move jinja filter code for arista.avd.add_md_toc to PyAVD by @gmuloc in https://github.com/aristanetworks/avd/pull/4104
- Refactor(plugins): Move jinja filter code for arista.avd.hide_passwords to PyAVD by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4112
- Refactor(plugins): Move jinja filter code for arista.avd.generate_esi to PyAVD by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4114
- Refactor(eos_designs): Move eos_designs_facts to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4110
- Refactor(eos_designs): Move eos_designs Python modules to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4120
- Refactor(eos_designs): Move eos_designs_shared_utils to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4126
- Refactor(plugins): Move jinja test code for arista.avd.contains to PyAVD by @gmuloc in https://github.com/aristanetworks/avd/pull/4131
- Refactor(eos_cli_config_gen): Move eos_cli_config_gen to pyavd by @gmuloc in https://github.com/aristanetworks/avd/pull/4117
- Refactor(plugins): Move jinja filter code for arista.avd.is_in_filter to PyAVD by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4133
- Refactor(plugins): Move schema code and schema fragments to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4130
- Refactor(plugins): Move jinja filter code for arista.avd.snmp_hash to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4136
- Refactor(plugins): Move jinja filter code for arista.avd.generate_lacp_id to PyAVD by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4139
- Refactor(plugins): Move jinja filter code for arista.avd.encrypt and arista.avd.decrypt to PyAVD by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4135
- Refactor(plugins): Move jinja filter code for arista.avd.status_render to PyAVD by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4142
- Refactor(plugins): Move jinja filter code for arista.avd.range_expand to PyAVD by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4138
- Refactor(plugins): Move internal cv_client code to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4141
- Refactor(plugins): Move jinja test code for arista.avd.defined to PyAVD by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4143
- Refactor(plugins): Move internal AVD code to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4140
- Refactor: Move requirements to PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4147
- Refactor(cv_deploy): Optimize creation of configlet containers by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3950
- Bump: pre-release 4.9.0-dev1 by @carlbuchmann in https://github.com/aristanetworks/avd/pull/4149
- Refactor(plugins): Deprecate various unused Ansible plugins by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4166
- Refactor: Deprecate Python3.9 support by @gmuloc in https://github.com/aristanetworks/avd/pull/4177

## Release 4.8.0

### Changes to requirements

- AVD now requires a newer minimum and maximum version of the Python package `ansible-core>=2.15.0,<2.18.0`.<br>
- The latest version can be installed with `pip install "ansible-core>=2.15.0" --upgrade`.
- AVD now requires a newer minimum but no maximum version of the Python package `jsonschema>=4.10.3`.<br>
  The latest version can be installed with `pip install "jsonschema>=4.10.3" --upgrade`.
- AVD has a new requirement of the Python package `referencing>=0.35.0`.<br>
  The latest version can be installed with `pip install "referencing>=0.35.0" --upgrade`.
- AVD no longer requires the Python package `md-toc`.

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Remove requirement for original_ip to be unique under interface IP NAT by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3900
- Fix(eos_cli_config_gen): Render access vlan on port-channel interfaces if mode is dot1q-tunnel. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3920
- Fix(eos_cli_config_gen): Missing variable protection in Jinja Templates. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4005
- Fix(eos_cli_config_gen): Fix the schema and template for action in event-handler. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4007

### Fixed issues in eos_designs

- Fix(eos_designs): Fix code error for monitor_sessions for network_ports by @gmuloc in https://github.com/aristanetworks/avd/pull/3818
- Fix(eos_designs): Fix missing features from LACP fallback individual by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3862
- Fix(eos_designs): Inband ztp works with inband_mgmt_ip key by @jrecchia1029 in https://github.com/aristanetworks/avd/pull/3908
- Fix(eos_designs): Make WAN RRs route-reflector clients of each other by @gmuloc in https://github.com/aristanetworks/avd/pull/3921
- Fix(eos_designs): Wrong IPsec profile name for Zscaler by @gmuloc in https://github.com/aristanetworks/avd/pull/3948
- Fix(eos_designs): Sanitize interface name in STUN profile name by @gmuloc in https://github.com/aristanetworks/avd/pull/3949
- Fix(eos_designs): Remove the remaining trailing slashes in schema by @gmuloc in https://github.com/aristanetworks/avd/pull/3961
- Fix(eos_designs): WAN Internet-exit fixes for Zscaler integration by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3984
- Fix(eos_designs): Connected endpoints ESI should only be configured on EVPN VTEPs. by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4020

### Other Fixed issues

- Fix: Remove "not RFC1918 IPs" from examples. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3800
- Fix(dhcp_provisioner): Support custom `node_type_keys` as a list of dicts. by @philippebureau in https://github.com/aristanetworks/avd/pull/3813
- Fix(plugins): Handle md-toc v9 by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3837
- Fix(eos_validate_state): ANTA Remove the use of the eos_design's "type" variable by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3870
- Fix: Fixing event-handlers in eos_designs_unit_tests molecule scenario. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3938
- Fix(plugins): Fix cv_zscaler_endpoints lookup plugin by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3946
- Fix(cv_deploy): Fix internet exit metadata by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3956
- Fix(cv_deploy): Detect pathfinder metadata studio version and skip unsupported fields by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3986

### Documentation

- Doc(plugins): Fix wrong module name in eos_designs_structured_config module doc by @gmuloc in https://github.com/aristanetworks/avd/pull/3795
- Doc: Release 4.7.1 by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3846
- Doc: Update installation guide to avoid 'pipx' by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3863
- Doc(eos_cli_config_gen): Add missing switchport port security table to documentation by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3880
- Doc(eos_validate_state): Add link for OSX fork issue by @gmuloc in https://github.com/aristanetworks/avd/pull/3902
- Doc: Update CSS to bring `code` to 100% size by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3917
- Doc: Updated the documentation for IPv4 ACL by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3955
- Doc: Move documentation of mlag_ibgp_peering_vrfs to network services section. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3992
- Doc: Fix examples for connected endpoints using deprecated data-model in input-varaibles.md by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3989
- Doc(eos_designs): Fix indentation in WAN how-to by @gmuloc in https://github.com/aristanetworks/avd/pull/4010
- Doc: Readme updates to align with the new Red Hat template by @JulioPDX in https://github.com/aristanetworks/avd/pull/4024

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): Add eos_cli support under router_isis. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3745
- Feat(eos_cli_config_gen): Add support for raw `eos_cli` under  `router_bgp` by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3673
- Feat(eos_cli_config_gen): Adding 'ip igmp host-proxy' interface support by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3657
- Feat(eos_cli_config_gen): add hardware flow tracking standard record format support by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3681
- Feat(eos_cli_config_gen): Add router service-insertion subcommands for Internet Exit by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3757
- Feat(eos_cli_config_gen): Add router internet-exit. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3748
- Feat(eos_cli_config_gen): Add aaa unresponsive action under global dot1x by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3739
- Feat(eos_cli_config_gen): Add IPsec and NAT options to tunnel_interfaces. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3830
- Feat(eos_cli_config_gen):  Add policy-maps qos police. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3620
- Feat(eos_cli_config_gen): Add FQDN & UFQDN support for ike profile local-id by @gmuloc in https://github.com/aristanetworks/avd/pull/3832
- Feat(eos_cli_config_gen): Add event-handler trigger on-maintenance. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3629
- Feat(eos_cli_config_gen): Support port-only option in IP NAT pools by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3840
- Feat(eos_cli_config_gen): Add capability to disable address-only for connectivity monitors by @gmuloc in https://github.com/aristanetworks/avd/pull/3867
- Feat(eos_cli_config_gen): Support SA lifetime for IP sec by @gmuloc in https://github.com/aristanetworks/avd/pull/3875
- Feat(eos_cli_config_gen): Add l4 to application traffic recognition by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/3780
- Feat(eos_cli_config_gen): Support activity polling-interval for router multicast. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3893
- Feat(eos_cli_config_gen): Support for additional commands under the EVPN address family by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3881
- Feat(eos_cli_config_gen): Enhance event-handlers model to accommodate other triggers with their specificities. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3878
- Feat(eos_cli_config_gen): Implement managing RCF. by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3798
- Feat(eos_cli_config_gen): Add support for isis spf-interval hold timer. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3912
- Feat(eos_cli_config_gen): Support for configuring logging level facilities by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3944
- Feat(eos_cli_config_gen): Option to set RCF route bgp address-family vpn-ipv6/ipv4 and redistribute. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3819
- Feat(eos_cli_config_gen): Support additional options for IP DHCP relay and IPv6 DHCP relay by @bjmeuer in https://github.com/aristanetworks/avd/pull/3925
- Feat(eos_cli_config_gen): Add router segment security by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/3782
- Feat(eos_cli_config_gen): Option to set RCF address-family ipv4, ipv6 and evpn by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3814
- Feat(eos_cli_config_gen): Option to set RCF for route bgp ipv4/ipv6 mulit-cast and VRF by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3821
- Feat(eos_cli_config_gen): Support additional options for IPv6 ND under SVIs by @bjmeuer in https://github.com/aristanetworks/avd/pull/3935
- Feat(eos_cli_config_gen): Add InfluxDB support by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3705
- Feat(eos_cli_config_gen): Adding segment-security in hardware counters. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4000
- Feat(eos_cli_config_gen): Add support for L2 in-place adjacency replacement (IAR) by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3990
- Feat(eos_cli_config_gen): Add transceiver.frequency under ethernet_interfaces by @ccsnw in https://github.com/aristanetworks/avd/pull/4003
- Feat(eos_cli_config_gen): Add option for dot1x aaa accounting update interval x seconds. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4017
- Feat(eos_cli_config_gen): Support logging transceiver in monitor layer1 by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3991
- Feat(eos_cli_config_gen): Add support for BGP TCP AO. by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3853
- Feat(eos_cli_config_gen): Add Regex pattern for region/zone/site name for router_adapative_virtual_topology by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/4026
- Feat(eos_cli_config_gen): Support for MSS Clamping on ethernet interfaces. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4018
- Feat(eos_cli_config_gen): Add support for copp policy-maps. by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3895
- Feat(eos_cli_config_gen): Add DHCP server options for TFTP and DNS by @jrecchia1029 in https://github.com/aristanetworks/avd/pull/3993

### New features and enhancements in eos_designs

- Feat(eos_designs): Added for L3LS P2P addressing via Spine using "downlink_pools" data model by @hubert-arista in https://github.com/aristanetworks/avd/pull/3693
- Feat(eos_designs): Add knob for IS-IS system-id format by @ZoeyFahner-Arista in https://github.com/aristanetworks/avd/pull/3677
- Feat(eos_designs): Add structured_config support in platform_settings. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3807
- Feat(eos_designs): Add platform specific management security entropy source settings. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3810
- Feat(eos_designs): Add support for Zscaler internet-exit policy by @gmuloc in https://github.com/aristanetworks/avd/pull/3833
- Feat(eos_designs): Add more granular settings for flow_tracking by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3776
- Feat(eos_designs): Add pim ipv4 sparse_mode on core_interfaces/l3_edge interfaces. by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3831
- Feat(eos_designs): Allow VLAN Aware Bundles even if common evpn_vlan_aware_bundles is false by @bjmeuer in https://github.com/aristanetworks/avd/pull/3827
- Feat(eos_designs): Add metadata for Zscaler internet-exit by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3886
- Feat(eos_designs): Add support for setting mgmt_gateway under the node settings. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3799
- Feat(eos_designs): Add optional cv-pathfinder site for pathfinders by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3904
- Feat(eos_designs): Add support for mlag_peer_ipv6_pool by @Xatrekak in https://github.com/aristanetworks/avd/pull/3885
- Feat(eos_designs): Add sample rate to sflow settings in eos_designs. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3891
- Feat(eos_designs): IPv4/IPv6 address-family configuration for bgp_peer_groups defined under network services. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3887
- Feat(eos_designs): Extend the functionality of the is_deployed flag to shutdown BGP peerings. by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3916
- Feat(eos_designs): Add support for ipv4_acl_in/out on SVIs defined under network services. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3791
- Feat(eos_designs): Add support for local internet exit by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3952

### New features and enhancement in both eos_designs and eos_cli_config_gen

- Feat(eos_designs,eos_cli_config_gen): Add support for MLAG port-channels to endpoints with PTP by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3672
- Feat(eos_designs, eos_cli_config_gen): Add BFD option for underlay ISIS by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3683

### Other new features and enhancements

- Feat(eos_validate_state): Added the validation for BGP address families(link-state, path-selection and ipv4/ipv6 sr-te) by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3872

### PyAVD Changes

- Fix(pyavd): Remove accidental requirement for PyYAML by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3838
- Feat(pyavd): Add optional dependency pyavd by @dlobato in https://github.com/aristanetworks/avd/pull/3852
- Refactor(pyavd): Lazy imports of vendored code by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3923

### Other Changes

- Refactor(plugins): Update cv_client to use SetSome for topology studio inputs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3803
- Refactor(eos_cli_config_gen): Modifying the data-model for management security entropy source by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3841
- Revert: "Bump pre-commit-ci/lite-action from 1.0.0 to 1.0.2" by @gmuloc in https://github.com/aristanetworks/avd/pull/3868
- Bump(requirements): Bump black from 24.3.0 to 24.4.0 in /ansible_collections/arista/avd by @dependabot in https://github.com/aristanetworks/avd/pull/3860
- Bump(eos_validate_state): ANTA Update eos_validate_state code to support ANTA v0.14.0 by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3871
- Bump(requirements): Bump black from 24.4.0 to 24.4.1 in /ansible_collections/arista/avd by @dependabot in https://github.com/aristanetworks/avd/pull/3906
- Bump(requirements): Bump black from 24.4.1 to 24.4.2 in /ansible_collections/arista/avd by @dependabot in https://github.com/aristanetworks/avd/pull/3913
- Bump(requirements): Support newer jsonschema versions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3934
- Refactor(eos_designs): Source more Zscaler metadata from lookup plugin by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3977
- Refactor(eos_designs): Minor code adjustments caught by latest pylint by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4021
- Refactor(plugins): Update cloudvision api with latest proto files by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3995
- Refactor(plugins): Move WAN internet-exit zscaler integration to eos_designs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4002
- Bump(requirements): Set minimum ansible-core version to 2.15.x and maximum to 2.17.x by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3927
- Refactor(plugins): Rewrite add_md_toc by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4011

## Release 4.7.1

### Other Fixed issues

- Fix(dhcp_provisioner): Support custom `node_type_keys` as a list of dicts. (#3813) by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3842
- Fix(plugins): Handle md-toc v9 (#3837) by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3845

### PyAVD Changes

- Fix(pyavd): Remove accidental requirement for PyYAML (#3838) by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3844

## Release 4.7.0

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Updating the valid values for PTP mode. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3685
- Fix(eos_cli_config_gen): Comply with EOS tacacs servers configuration order by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3711

### Fixed issues in eos_designs

- Fix(eos_designs): Use WAN VNI for cv-pathfinder metadata by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3728
- Fix(eos_designs): Do not generate DP IPsec profile when HA ipsec is disabled by @gmuloc in https://github.com/aristanetworks/avd/pull/3733
- Fix(eos_designs): Make metadata cloudvision tags name case sensitive by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3771
- Fix(eos_designs): evpn_multicast error handling by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3731

### Other Fixed issues

- Fix(plugins): YAML Dumper/Loader not working without libyaml by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3706
- Fix(plugins): Add support for python3.9 for get_all_with_path by @sugetha24 in https://github.com/aristanetworks/avd/pull/3763
- Fix(eos_validate_state): ANTA Fix the report to have consistent test descriptions, categories and input details by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3743

### Documentation

- Doc: Fix YAML in schema docs for multiline descriptions with blank lines by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3651
- Doc: Fix CV playbook example in intro to ansible and avd by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3778
- Doc(eos_cli_config_gen, eos_designs): Add missing schema files by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3704
- Doc(eos_cli_config_gen): Add Dps1 to flow tracking output in device config by @gmuloc in https://github.com/aristanetworks/avd/pull/3786
- Doc(cv_deploy): Add supported CloudVision versions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3788
- Doc: Adding eos designs diagrams for mpls and l2ls by @JulioPDX in https://github.com/aristanetworks/avd/pull/3790
- Doc: Updating diagrams for MPLS example by @JulioPDX in https://github.com/aristanetworks/avd/pull/3784
- Doc: Updating intro to avd and ansible diagrams by @JulioPDX in https://github.com/aristanetworks/avd/pull/3783
- Doc: Clean documentation for WAN by @gmuloc in https://github.com/aristanetworks/avd/pull/3665

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): Add neighbors key to router_bgp.address_family_evpn. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3641
- Feat(eos_cli_config_gen): Support for EVPN Multihoming IP Mass-withdrawal by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3656
- Feat(eos_cli_config_gen): Add 1-step Boundary Clock support by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3666
- Feat(eos_cli_config_gen): Add support for setting the ASN notation by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/3678
- Feat(eos_cli_config_gen): Add more 'pim ipv4' interface commands by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3663
- Feat(eos_cli_config_gen): add sFlow sample output subinterface support by @philippebureau in https://github.com/aristanetworks/avd/pull/3458
- Feat(eos_cli_config_gen): Add support for switchport port-security. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3561
- Feat(eos_cli_config_gen): Add FIPS and hostkey.client features to management_ssh by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3571
- Feat(eos_cli_config_gen): Extend match lists to support IPv4 and IPv6 by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/3770
- Feat(eos_cli_config_gen): Add support for Interface Vxlan, vxlan bridging vtep-to-vtep by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3718
- Feat(eos_cli_config_gen): Add custom comments at the top of the rendered configuration. by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3738

### New features and enhancements in eos_designs

- Feat(eos_designs): GTSM configuration to limit the TTL permitted for bgp peering to 1 for WAN by @amitsagar-arsita in https://github.com/aristanetworks/avd/pull/3607
- Feat(eos_designs): Make DPS1 interface MTU 9k by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3619
- Feat(eos_designs): Implement WAN/LAN redistribution for eBGP LAN by @gmuloc in https://github.com/aristanetworks/avd/pull/3602
- Feat(eos_designs): Configure BFD timers higher than DPS timeouts for WAN BGP neighbors by @amitsagar-arsita in https://github.com/aristanetworks/avd/pull/3586
- Feat(eos_designs):  Replace wan_role checks with helper cached_property utils by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3639
- Feat(eos_designs): Add 'maximum_routes_warning_only' to the 'bgp_peers' in network_services data model by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3645
- Feat(eos_designs): Add system mac address to structured config under 'metadata'. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3658
- Feat(eos_designs): Add eBGP LAN HA support for CV Pathfinder by @gmuloc in https://github.com/aristanetworks/avd/pull/3494
- Feat(eos_designs): Add filter.allow_vrfs and filter.deny_vrfs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3653
- Feat(eos_designs): Add wan_vni for WAN VRF by @gmuloc in https://github.com/aristanetworks/avd/pull/3600
- Feat(eos_designs): Add support for hop count lowest in load-balancing policies by @gmuloc in https://github.com/aristanetworks/avd/pull/3646
- Feat(eos_designs): Add wan_carrier and circuit_id to l3 interface description by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3649
- Feat(eos_designs): Uplink type 'lan' for WAN routers by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3593
- Feat(eos_designs): Option to define evpn_vlan_bundle for SVIs by @bjmeuer in https://github.com/aristanetworks/avd/pull/3623
- Feat(eos_designs): IPv6 inband management settings by @emilarista in https://github.com/aristanetworks/avd/pull/3382
- Feat(eos_designs): STUN SSL profile support by @amitsagar-arsita in https://github.com/aristanetworks/avd/pull/3636
- Feat(eos_designs): Add 'dhcp_ip_address' under 'l3_interfaces' node settings by @gmuloc in https://github.com/aristanetworks/avd/pull/3686
- Feat(eos_designs): Allow to control DPS timers at the wan_path_group level by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3625
- Feat(eos_designs): Add 1-step Boundary Clock support by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3668
- Feat(eos_designs): Add flowtracking on WAN Router LAN uplinks by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3679
- Feat(eos_designs): Update platform.py with 7358X4 by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/3667
- Feat(eos_designs): Enable KERNELFIB_PROGRAM_ALL_ECMP for all wan routers by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3689
- Feat(eos_designs): Add default_preference and excluded for wan_path_groups by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3648
- Feat(eos_designs): Allow to disable IPsec on dynamic peers for a path-group avd by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3695
- Feat(eos_designs): Allow custom name for LAN_HA path-group by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3723
- Feat(eos_designs): Allow custom name for pathfinder Flow tracker tracker and exporter settings by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3721
- Feat(eos_designs): Add ability to override wan control plane policy by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3690
- Feat(eos_designs): public_ip input field support for devices behind NAT by @amitsagar-arsita in https://github.com/aristanetworks/avd/pull/3652
- Feat(eos_designs): Add Vxlan1 VRF VNI for WAN VRFs on Pathfinders by @gmuloc in https://github.com/aristanetworks/avd/pull/3746
- Feat(eos_designs): L2 inband ztp functionality by @jrecchia1029 in https://github.com/aristanetworks/avd/pull/3660
- Feat(eos_designs): Add sflow_settings by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3078
- Feat(eos_designs): Allow overlapping VLAN IDs under network services by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3722
- Feat(eos_designs): Dot1x unauthorized access|native vlan membership egress to ethernet interfaces via port_profile by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3779
- Feat(eos_designs): Add support for ipv4_acls with field replacement by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3750

### Other new features and enhancements

- Feat(plugins): Add ISIS support to encrypt and decrypt filters by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3662
- Feat(eos_validate_state): ANTA Provide custom ANTA catalog files to validate state by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3655
- Feat(eos_validate_state): Added support to validate DPS interface state by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3692
- Feat(plugins): Add "unique_keys" in avdschema. by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3725

### PyAVD Changes

- Refactor(pyavd): Add ability to detect running from source by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3632

### Other Changes

- Refactor(eos_designs): Remove switch-focused config from WAN Routers by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3644
- Refactor(eos_designs): Better security for IPsec configuration for WAN by @gmuloc in https://github.com/aristanetworks/avd/pull/3543
- Refactor(eos_designs): Grouping name generation of  WAN profiles and policies by @gmuloc in https://github.com/aristanetworks/avd/pull/3638
- Refactor(eos_designs): Remove wan_transit and rename wan_edge to wan_router by @gmuloc in https://github.com/aristanetworks/avd/pull/3654
- Fix(deploy_to_cv): Do not add Pathfinders to Routers section of metadata studio by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3680
- Refactor(eos_designs): Rename WAN CONTROL-PLANE objects by @gmuloc in https://github.com/aristanetworks/avd/pull/3676
- Refactor(eos_designs): Set cv-pathfinder interface tags for subinterfaces by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3684
- Refactor(eos_designs): WAN Preview - Prefix default zone name with region name by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3688
- Refactor(eos_designs): Make id mandatory for AVTs when mode is cv-pathfinder by @gmuloc in https://github.com/aristanetworks/avd/pull/3707
- Refactor(eos_validate_state): ANTA Refactor AvdTestBase by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3701
- Refactor(eos_designs): Make DHCP default route generated by default by @gmuloc in https://github.com/aristanetworks/avd/pull/3724
- Refactor(deploy_to_cv): Ignore missing metadata by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3703
- Refactor(eos_designs): CV Pathfinder metadata updates by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3697
- Refactor: Fix typo to render flow-tracking for LAN subif in WAN case by @gmuloc in https://github.com/aristanetworks/avd/pull/3729
- Refactor(eos_designs): Simplify WAN policies by @gmuloc in https://github.com/aristanetworks/avd/pull/3719
- Bump(eos_validate_state): ANTA Bump and update code for ANTA v0.13.0 by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3726
- Refactor(deploy_to_cv): Update "role" field for "transit region" in metadata studio by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3744
- Refactor(plugins): Improve mergeonschema including more descriptive errors by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3734
- Refactor(eos_designs): Prevent empty path-groups for auto generated WAN policies by @gmuloc in https://github.com/aristanetworks/avd/pull/3710
- Refactor(plugins): Add option to allow duplicate primary keys in schema by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3747
- Refactor(eos_designs): Make Flow tracking enabled on Dps1 interface only by @gmuloc in https://github.com/aristanetworks/avd/pull/3767
- Feat(deploy_to_cv): Add support for waiting for Change Control to be completed before returning by @sugetha24 in https://github.com/aristanetworks/avd/pull/3732
- Refactor(eos_designs): Force WAN HA to be either enabled or disabled by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3772
- Refactor(eos_designs): Set `default_underlay_routing_protocol: none` for wan_rr and wan_router by @gmuloc in https://github.com/aristanetworks/avd/pull/3775
- Refactor(eos_designs): Optional CV Pathfinder region for pathfinders by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3774
- Refactor(deploy_to_cv): Set default values for constraints in metadata studio by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3773
- Refactor(deploy_to_cv): Dynamic timeouts and library support for username/password by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3762
- Refactor(deploy_to_cv): Remove metadata studio version detection by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3781
- Refactor: Rename deploy_to_cv role and module and release as cv_deploy by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3785
- Refactor(eos_designs): Mark flow_tracking_settings as PREVIEW for 4.7.0 by @gmuloc in https://github.com/aristanetworks/avd/pull/3789

## Release 4.6.0

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Fix invalid valid value for ip_security.sa_policies.esp.encryption by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3499
- Fix(eos_cli_config_gen): Print config for service_routing_protocols_model ribd by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3508
- Fix(eos_cli_config_gen): Reordering router adaptive-virtual-topology / router path-selection by @gmuloc in https://github.com/aristanetworks/avd/pull/3505
- Fix(eos_cli_config_gen): Various fixes for router path-selection & application-traffic-recognition by @gmuloc in https://github.com/aristanetworks/avd/pull/3504
- Fix(eos_cli_config_gen): Fix tables in documentation by @emilarista in https://github.com/aristanetworks/avd/pull/3525
- Fix(eos_cli_config_gen): sa_filter.out_list generating incorrect value in router-msdp template by @CyrielRct in https://github.com/aristanetworks/avd/pull/3614

### Fixed issues in eos_designs

- Fix(eos_designs): Empty description under network-ports by @gmuloc in https://github.com/aristanetworks/avd/pull/3445
- Fix(eos_designs): Fix incorrect syntax in EVPN multicast PIM error messages by @jonxstill in https://github.com/aristanetworks/avd/pull/3456
- Fix(eos_designs): Do not KeyError when no path-group is in common with pathfinder by @gmuloc in https://github.com/aristanetworks/avd/pull/3512
- Fix(eos_designs): Avoid in-place updates of network services impacting PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3544
- Fix(eos_designs): WAN Preview - Update configs to align to best practices by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3556
- Fix(eos_designs): management interface for 750 platforms by @matthewgottlieb in https://github.com/aristanetworks/avd/pull/3558
- Fix(eos_designs): Faulty MLAG config generated when missing platform info by @emilarista in https://github.com/aristanetworks/avd/pull/3583
- Fix(eos_designs): Ensure VLAN VNIs are not rendered without network_services.l2 by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3588
- Fix(eos_designs): Remove WAN RR BGP peering when no common path-group by @gmuloc in https://github.com/aristanetworks/avd/pull/3594

### Other Fixed issues

- Fix(eos_validate_state): ANTA Fix AvdTestBase structured_config objects by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3447
- Fix: Minor container fixes by @ankudinov in https://github.com/aristanetworks/avd/pull/3474
- Fix(eos_validate_state): ANTA Decrease default logging level for tests by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3477
- Fix(plugins): Remove wrong 3.9 deprecation warning by @gmuloc in https://github.com/aristanetworks/avd/pull/3484
- Fix(eos_validate_state): ANTA Fix bug when skipping specific tests of AvdTestBGP by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3498
- Fix: Fixing eos_designs_unit_tests molecule scenario for node_type.l3interfaces.ip_address by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3577
- Fix: Remove devcontainer mounts to address error 16 with molecule by @ankudinov in https://github.com/aristanetworks/avd/pull/3541
- Fix: Invalid check for ansible in devcontainer by @ankudinov in https://github.com/aristanetworks/avd/pull/3608
- Fix(eos_validate_state): ANTA Refactor BGP test to now also support direct neighbors and IPv6 AFI by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3572
- Fix(eos_validate_state): ANTA Handle Pydantic + Python 3.9.7 bug gracefully by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3601
- Fix(eos_validate_state): ANTA Fix AvdTestInbandReachability to support the new inband management data model by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3581

### Documentation

- Doc(eos_cli_config_gen): Add documentation table for Application traffic recognition by @gmuloc in https://github.com/aristanetworks/avd/pull/3449
- Doc: fix mlag ibgp peering formula rendering by @noredistribution in https://github.com/aristanetworks/avd/pull/3455
- Doc: CSS updates and mike pinning by @JulioPDX in https://github.com/aristanetworks/avd/pull/3441
- Doc: Capitalize the header for Management Interface description in doc template by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3488
- Doc: Capitalize the header for Management Interface description IPv6 in doc template by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3515
- Doc: rename repo ansible-avd -> avd by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3513
- Doc: fix formatting for service account authentication note by @noredistribution in https://github.com/aristanetworks/avd/pull/3520
- Doc: adding more info to TerminAttr cvsourceintf by @noredistribution in https://github.com/aristanetworks/avd/pull/3580
- Doc(eos_cli_config_gen, eos_designs): Consistent descriptions for BGP AS schema fields re asdot notation by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3618
- Doc: Terminology update and minor grammar corrections by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3482

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): add sFlow sample input subinterface support by @AlexGayed in https://github.com/aristanetworks/avd/pull/3457
- Feat(eos_cli_config_gen): DHCP Server data model by @emilarista in https://github.com/aristanetworks/avd/pull/3269
- Feat(eos_cli_config_gen): Support for setting BFD timers for BGP neighbors and peer-groups by @amitsagar-arsita in https://github.com/aristanetworks/avd/pull/3432
- Feat(eos_cli_config_gen): Add tx-latency to queue monitor by @chetryan in https://github.com/aristanetworks/avd/pull/3364
- Feat(eos_cli_config_gen): Add advertise_map and supress_map keys to BGP template by @gusmb in https://github.com/aristanetworks/avd/pull/3360
- Feat(eos_cli_config_gen): Add TTL max hops in router bgp by @harshitk-arista in https://github.com/aristanetworks/avd/pull/3425
- Feat(eos_cli_config_gen): Support for setting default QSFP transceiver mode by @mmaaloul in https://github.com/aristanetworks/avd/pull/3271
- Feat(eos_cli_config_gen): Add session stats option to router bfd by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3502
- Feat(eos_cli_config_gen): Add path-groups keepalive interval for router path-selection by @amitsagar-arsita in https://github.com/aristanetworks/avd/pull/3501
- Feat(eos_cli_config_gen): add ip verify unicast source to ethernet-, vlan- and port-channel interfaces by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3492
- Feat(eos_cli_config_gen): Support for tcp mss ceiling in router path selection by @amitsagar-arsita in https://github.com/aristanetworks/avd/pull/3489
- Feat(eos_cli_config_gen): Set BFD neighbor and per-link in port-channel interfaces by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3509
- Feat(eos_cli_config_gen): Add vxlan_interface.Vxlan1.multicast_headend_replication by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3490
- Feat(eos_cli_config_gen): Extend router_isis data-model by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3539
- Feat(eos_cli_config_gen): Support disabling hardware encryption for ip security by @gmuloc in https://github.com/aristanetworks/avd/pull/3550
- Feat(eos_cli_config_gen): Add encapsulation to flow tracking by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/3503
- Feat(eos_cli_config_gen): Add ipv6_attached_host_route_export for SVIs by @emilarista in https://github.com/aristanetworks/avd/pull/3564
- Feat(eos_cli_config_gen): add router IGMP host proxy configuration support by @philippebureau in https://github.com/aristanetworks/avd/pull/3565
- Feat(eos_cli_config_gen): Add support for logging event storm-control and link-status in interfaces by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3589
- Feat(eos_cli_config_gen): Add support for flow parallelization encapsulation udp by @ayushmittal-arista in https://github.com/aristanetworks/avd/pull/3603
- Feat(eos_cli_config_gen): Add pim ipv4 border router  by @philippebureau in https://github.com/aristanetworks/avd/pull/3613
- Feat(eos_cli_config_gen): Add support for MPLS resolution RIBs by @chetryan in https://github.com/aristanetworks/avd/pull/3592
- Feat(eos_cli_config_gen): Add dot1x protocol bpdu bypass by @kmueller68 in https://github.com/aristanetworks/avd/pull/3622
- Feat(eos_cli_config_gen): Add support for monitor layer1 by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3540
- Feat(eos_cli_config_gen): Add set_overload_bit and authentication to router_isis by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3578

### New features and enhancements in eos_designs

- Feat(eos_designs): Add l3_edge.l3_interfaces support by @gmuloc in https://github.com/aristanetworks/avd/pull/3426
- Feat(eos_designs): Add WAN design new top level schema keys by @gmuloc in https://github.com/aristanetworks/avd/pull/3388
- Feat(eos_designs): Set spanning-tree priority per VLAN by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3273
- Feat(eos_designs): Custom prefix length for P2P uplinks and MLAG by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3268
- Feat(eos_designs): Add other CCS (Campus) platforms for PoE support by @jonxstill in https://github.com/aristanetworks/avd/pull/3374
- Feat(eos_designs): Add WAN interface configuration under `l3_edge.l3_interfaces` by @gmuloc in https://github.com/aristanetworks/avd/pull/3440
- Feat(eos_designs): Preview - Generate CV tags by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3472
- Feat(eos_designs): Preview - Generate CV Tags and metadata for WAN by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3487
- Feat(eos_designs): Implement AVT policies / VRF by @gmuloc in https://github.com/aristanetworks/avd/pull/3446
- Feat(eos_designs): Loopbacks data model under tenant vrfs by @emilarista in https://github.com/aristanetworks/avd/pull/3486
- Feat(eos_designs): Interface "LACP Fallback Individual" Support by @bjmeuer in https://github.com/aristanetworks/avd/pull/3510
- Feat(eos_designs): Add support for virtual topologies constraints by @gmuloc in https://github.com/aristanetworks/avd/pull/3535
- Feat(eos_designs): Add the possibility to set CPU max allocation by @gmuloc in https://github.com/aristanetworks/avd/pull/3548
- Feat(eos_designs): Make maximum-path 16 default for WAN routers by @gmuloc in https://github.com/aristanetworks/avd/pull/3549
- Feat(eos_designs): Add router traffic-engineering for CV Pathfinder by @gmuloc in https://github.com/aristanetworks/avd/pull/3551
- Feat(eos_designs): Uplink p2p vrfs by @gmuloc in https://github.com/aristanetworks/avd/pull/3467
- Feat(eos_designs): WAN Preview - Generate cv_pathfinder metadata for AVTs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3552
- Feat(eos_designs): Inject default VRF policy with a match-all statement when missing by @gmuloc in https://github.com/aristanetworks/avd/pull/3560
- Feat(eos_designs): Add support for subinterfaces in nodes.l3_interfaces by @gmuloc in https://github.com/aristanetworks/avd/pull/3562
- Feat(eos_designs): Single uplink to mlag pair, mlag_on_orphan_port_channel_downlink by @jrecchia1029 in https://github.com/aristanetworks/avd/pull/3495
- Feat(eos_designs): Support routing protocol option on l3_edge p2p_links by @kornoa in https://github.com/aristanetworks/avd/pull/3516
- Feat(eos_designs): Set static-routes on node-type l3_interfaces by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3599
- Feat(eos_designs): Add support for channel_id in l3_edge by @chetryan in https://github.com/aristanetworks/avd/pull/3585

### New features and enhancement in both eos_designs and eos_cli_config_gen

- Feat(eos_cli_config_gen, eos_designs): Add support for secondary ssh_key to local_users by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3514

### Other new features and enhancements

- Feat: Avd install for codespaces by @ankudinov in https://github.com/aristanetworks/avd/pull/3476
- Feat: Additional fixes for Github Codespaces support by @ankudinov in https://github.com/aristanetworks/avd/pull/3519
- Feat(eos_validate_state): ANTA Bump to ANTA 0.12.0 and update code by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3575
- Feat(plugins): Preview - New arista.avd.deploy_to_cv role by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3466
- Feat(eos_validate_state): ANTA Add a knob to exclude interfaces from being validated by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3576
- Feat(deploy_to_cv): Auto onboard to I&T Studio by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3626

## Release 4.5.0

### Changes to requirements

- Changed Python requirements:
  - Minimum Python version 3.9
  - Minimum `ansible-core` version 2.14
  - Minimum `jinja2` version 3.0.0
  - Minimum `PyYAML` version 6.0.0
- Changed Ansible collection requirements:
  - Minimum `arista.cvp` version 3.10.1.
  - Minimum `arista.eos` version 7.0.0.
  - Minimum `ansible.utils` version 3.0.0.

All requirements will be enforced during each run of AVD roles.

See the full list of requirements in the [installation guide](../installation/collection-installation.md).

Detailed changes:

- Bump: Update Ansible and Python requirements by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3295
- Bump: ansible collection dependencies by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3410

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Wrong CLI template for some ip_security options by @gmuloc in https://github.com/aristanetworks/avd/pull/3263
- Fix(eos_cli_config_gen): STUN server supports multiple local interfaces by @gmuloc in https://github.com/aristanetworks/avd/pull/3266
- Fix(eos_cli_config_gen): l2_mtu under port_channel_interfaces by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3291
- Fix(eos_cli_config_gen): correct logging event storm-control under interface ethernet by @kmueller68 in https://github.com/aristanetworks/avd/pull/3303
- Fix(eos_cli_config_gen): Missing password key in router_bgp.neighbors.items by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3326
- Fix(eos_cli_config_gen): Add device documentation for phone VLAN features by @jonxstill in https://github.com/aristanetworks/avd/pull/3329
- Fix(eos_cli_config_gen): Correct syntax for "redistribute bgp" in router bgp by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3369
- Fix(eos_cli_config_gen): Merge flow_tracking tables by @chetryan in https://github.com/aristanetworks/avd/pull/3396
- Fix(eos_cli_config_gen): Fix radius attribute 32 format option. by @Chr1stophP in https://github.com/aristanetworks/avd/pull/3413
- Fix(eos_cli_config_gen): Hide ip-security shared-key from device documentation by @gmuloc in https://github.com/aristanetworks/avd/pull/3411
- Fix(eos_cli_config_gen): Add line delimiter at beginning of ip access-list cli by @kmueller68 in https://github.com/aristanetworks/avd/pull/3403
- Fix(eos_cli_config_gen): Render switchport mode for all modes for Port-channels by @gmuloc in https://github.com/aristanetworks/avd/pull/3429
- Fix(eos_cli_config_gen): MAC Security key fallback configured even if set to false  by @bjmeuer in https://github.com/aristanetworks/avd/pull/3437

### Fixed issues in eos_designs

- Fix(eos_designs): Inherited structured_config on multiple SVIs. by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3298
- Fix(eos_designs): Handling empty vars in network services by @emilarista in https://github.com/aristanetworks/avd/pull/3314
- Fix(eos_designs): Incorrect type for bpg remote_as by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3313
- Fix(eos_designs): Include ISIS interfaces in fabric docs if any device uses ISIS by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3345
- Fix(eos_designs): Correct logic for VRF RD/RT overrides by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3434

### Fixed issues in both eos_designs and eos_cli_config_gen

- Fix(eos_cli_config_gen, eos_designs): BGP VRF Prefix-lists not allowed outside of AF by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3358
- Fix(eos_cli_config_gen,eos_designs): Accept numeric ACL names by @pmprado in https://github.com/aristanetworks/avd/pull/3363

### Other Fixed issues

- Fix(eos_validate_state): ANTA Add a check to AvdTestLLDPTopology for shutdown interfaces by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3234
- Fix(cvp_configlet_upload): Use correct var for tasks manipulation by @titom73 in https://github.com/aristanetworks/avd/pull/3337
- Fix(eos_validate_state): ANTA Add conditions to skip tests if a device is not deployed by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3272
- Fix(eos_config_deploy_cvp): share tags from parent to dependent tasks. by @arista-matt in https://github.com/aristanetworks/avd/pull/3333
- Fix: Change dev container image by @ankudinov in https://github.com/aristanetworks/avd/pull/3378
- Fix(eos_validate_state): ANTA Adding support for FQDN Ansible hosts and fix errors when shutdown and description keys are missing by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3407

### Documentation

- Doc: add CVaaS Regional URLs by @noredistribution in https://github.com/aristanetworks/avd/pull/3243
- Doc: Fix missing flow_tracking table by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3307
- Doc: Fix missing tables in eos_cli_config_gen by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3308
- Doc(eos_designs): svi_profiles do not support tags by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3319
- Doc: Improve role defaults documentation by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3320
- Doc: Improve schema generated docs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3321
- Doc(eos_cli_config_gen): Fix table for router AVT by @gmuloc in https://github.com/aristanetworks/avd/pull/3341
- Doc: Improve search by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3340
- Doc(eos_cli_config_gen): Changed syslog hostname description by @pmprado in https://github.com/aristanetworks/avd/pull/3353
- Doc: Fix doc generation by @gmuloc in https://github.com/aristanetworks/avd/pull/3405

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): Add ethernet interface dhcp server config by @gmuloc in https://github.com/aristanetworks/avd/pull/3231
- Feat(eos_cli_config_gen): Add support for qos map exp by @philippebureau in https://github.com/aristanetworks/avd/pull/3204
- Feat(eos_cli_config_gen): Support of next_hop_unchanged under EVPN address family by @mmaaloul in https://github.com/aristanetworks/avd/pull/3232
- Feat(eos_cli_config_gen): Implement management-ssh client-alive by @gmuloc in https://github.com/aristanetworks/avd/pull/3265
- Feat(eos_cli_config_gen): Add knob to define port in GNMI transport grpc by @philippebureau in https://github.com/aristanetworks/avd/pull/3245
- Feat(eos_cli_config_gen): support for mlag peer-link requests disabled under dhcp_relay by @kmueller68 in https://github.com/aristanetworks/avd/pull/3262
- Feat(eos_cli_config_gen): Add other valid_values for event-handler trigger 'on-boot' by @gmuloc in https://github.com/aristanetworks/avd/pull/3264
- Feat(eos_cli_config_gen): Add additional-path for evpn address-family peer-groups by @gmuloc in https://github.com/aristanetworks/avd/pull/3278
- Feat(eos_cli_config_gen): LLDP for Management interfaces by @gmuloc in https://github.com/aristanetworks/avd/pull/3277
- Feat(eos_cli_config_gen): Implement speed for management interfaces by @gmuloc in https://github.com/aristanetworks/avd/pull/3284
- Feat(eos_cli_config_gen): Support for "agents" config by @gmuloc in https://github.com/aristanetworks/avd/pull/3282
- Feat(eos_cli_config_gen): Add router path-selection feature by @gmuloc in https://github.com/aristanetworks/avd/pull/3203
- Feat(eos_cli_config_gen): Add enabled flag to router traffic-engineering by @gmuloc in https://github.com/aristanetworks/avd/pull/3280
- Feat(eos_cli_config_gen): Add mtu to Dps interfaces by @gmuloc in https://github.com/aristanetworks/avd/pull/3274
- Feat(eos_cli_config_gen): Deprecate daemon_terminattr.cvcompression by @gmuloc in https://github.com/aristanetworks/avd/pull/3275
- Feat(eos_cli_config_gen): Add ARP static entries by @gmuloc in https://github.com/aristanetworks/avd/pull/3288
- Feat(eos_cli_config_gen): Implement platform sfe cpu allocation maximum by @gmuloc in https://github.com/aristanetworks/avd/pull/3287
- Feat(eos_cli_config_gen): router adaptive-virtual-topology by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3237
- Feat(eos_cli_config_gen): Add WRED support by @chetryan in https://github.com/aristanetworks/avd/pull/3192
- Feat(eos_cli_config_gen): Implement NAT profiles + ethernet interfaces CLI by @gmuloc in https://github.com/aristanetworks/avd/pull/3294
- Feat(eos_cli_config_gen): Implement VRRP for ethernet interfaces by @gmuloc in https://github.com/aristanetworks/avd/pull/3276
- Feat(eos_cli_config_gen): Add hardware_offload feature to flow_tracking.sampled by @tgodaA in https://github.com/aristanetworks/avd/pull/3318
- Feat(eos_cli_config_gen): Extend CLI model for ip_security by @gusmb in https://github.com/aristanetworks/avd/pull/3312
- Feat(eos_cli_config_gen): Adding options for path-selection lb policies by @gmuloc in https://github.com/aristanetworks/avd/pull/3334
- Feat(eos_cli_config_gen): Extend sbfd for initiator measurement round-trip by @chetryan in https://github.com/aristanetworks/avd/pull/3347
- Feat(eos_cli_config_gen): implement global ip dhcp snooping by @kmueller68 in https://github.com/aristanetworks/avd/pull/3323
- Feat(eos_cli_config_gen): Add profile and policy in adaptive-virtual-topology by @harshitk-arista in https://github.com/aristanetworks/avd/pull/3351
- Feat(eos_cli_config_gen): Add support for logging format rfc5424 by @durd in https://github.com/aristanetworks/avd/pull/3386
- Feat(eos_cli_config_gen): Improve generated documentation by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3377
- Feat(eos_cli_config_gen): Add options to stun client and server by @harshitk-arista in https://github.com/aristanetworks/avd/pull/3383
- Feat(eos_cli_config_gen): Adding application traffic recognition model by @amitsagar-arsita in https://github.com/aristanetworks/avd/pull/3350
- Feat(eos_cli_config_gen): Add CRL support for management security by @harshitk-arista in https://github.com/aristanetworks/avd/pull/3420
- Feat(eos_cli_config_gen): Support Sand MDB Profiles by @pmprado in https://github.com/aristanetworks/avd/pull/3372

### New features and enhancements in eos_designs

- Feat(eos_designs): Support for PIM RP access_list_name under VRFs and Tenants by @jonxstill in https://github.com/aristanetworks/avd/pull/3201
- Feat(eos_designs): Support PTP on MLAG peer-link by @jrecchia1029 in https://github.com/aristanetworks/avd/pull/3040
- Feat(eos_designs): Added the is_deployed knob to the structured_config by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3241
- Feat(eos_designs): Support for underlay uplink_switch_interface_speed by @jonxstill in https://github.com/aristanetworks/avd/pull/3256
- Feat(eos_designs): Add `default_mgmt_method` to be used later in new management settings. by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3328
- Feat(eos_designs): Port-channel ID knob for uplinks with type "port-channel" by @bjmeuer in https://github.com/aristanetworks/avd/pull/3176
- Feat(eos_designs): Add uplink_type at nodes level by @gmuloc in https://github.com/aristanetworks/avd/pull/3385
- Feat(eos_designs): Improve custom python class API for interface descriptions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3311
- Feat(eos_designs): Phone VLAN support for endpoints by @jonxstill in https://github.com/aristanetworks/avd/pull/3317
- Feat(eos_designs): Add RD and RT override for VRFs by @bjmeuer in https://github.com/aristanetworks/avd/pull/3419
- Feat(eos_designs): Add ntp_settings by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3293

### New features and enhancement in both eos_designs and eos_cli_config_gen

- Feat(eos_cli_config_gen,eos_designs): Add support for 'l2 mru' by @m-rhode in https://github.com/aristanetworks/avd/pull/3164
- Feat(eos_designs,eos_cli_config_gen): Add metadata.platform to structured configuration by @dlobato in https://github.com/aristanetworks/avd/pull/3421

### Other new features and enhancements

- Feat: AVD dev containers by @ankudinov in https://github.com/aristanetworks/avd/pull/3179
- Feat(eos_validate_state): ANTA Add eAPI HTTPS SSL profile test by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/3357
- Feat(eos_validate_state): ANTA New action plugin to generate the reports by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3352

### PyAVD Changes

- Feat(pyavd): Adding "path" attribute to validation_errors and deprecation_warnings. by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/3255
- Bump(pyavd): Move PyAVD out of beta by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3433

### Other Changes

- Refactor(eos_designs): Remove EVPN limitation for underlay_filter_peer_as by @emilarista in https://github.com/aristanetworks/avd/pull/3207
- Refactor(eos_designs): Add testcases for ipaddressing and move it to plugin utils by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/2410
- Refactor(eos_designs): Optimize conversion of structured config outputs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3240
- Refactor(eos_designs): Reorder BGP address family rendering for overlay module by @gmuloc in https://github.com/aristanetworks/avd/pull/3393

## Release 4.4.0

### Deprecation warnings for Python 3.8 and ansible-core<2.14

- As per https://docs.ansible.com/ansible/latest/reference_appendices/release_and_maintenance.html#ansible-core-support-matrix, `ansible-core` version 2.12 was declared End-of-Life (EOL) on May 22nd 2023 and version 2.13 will be declared EOL on November 6th 2023.

  AVD will drop support for `ansible-core` versions 2.12 and 2.13 in the next **minor** release after November 6th 2023.

- Since `ansible-core` versions above 2.14 do not support Python versions below 3.9, the support for Python 3.8 will be dropped from AVD at the same time.

- The `arista.avd.verify_requirements` module will start emitting deprecation warnings starting AVD 4.4 to warn users about these deprecations.

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen) - under maximum_paths, ecmp field is not required by @mmaaloul in https://github.com/aristanetworks/avd/pull/3111
- Fix(eos_cli_config_gen) - ip http client source interfaces cli not generated by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3180
- Fix(eos_cli_config_gen) - Correct schema for class-maps vlans and cos options by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3215
- Fix(eos_cli_config_gen) - Correct max TTL values for ip_access_lists and ptp by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3225
- Fix(eos_cli_config_gen) - Remove requirement for MACSec license and FIPS by @xaviramon in https://github.com/aristanetworks/avd/pull/3239

### Fixed issues in eos_designs

- Fix(eos_designs) - Configuration of PTP for port-channel uplinks by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3112

  L2leaf switches were included in the original implementation of PTP for a fabric, but configuration for the port-channel uplinks were missed. This fix adds the missing configuration for the uplinks of l2 leaf switches.

  !!! note
      Although this missing configuration was a bug, some deployments may not want it. If so, they can set

      ```yaml
      l2leaf:
        nodes:
          - name: <hostname>
            ...
            uplink_ptp:
              enable: false
      ```

- Fix(eos_designs) - removed min and max value from vrf_id by @karnag3 in https://github.com/aristanetworks/avd/pull/3130
- Fix(eos_designs) - Configure evpn_ebgp_gateway_multihop for ipvpn_gateway EBGP peers by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3205
- Fix(eos_designs) - change speed group value from int to str by @philippebureau in https://github.com/aristanetworks/avd/pull/3235
- Fix(eos_designs) - Improve evpn_multicast error handling by @jonxstill in https://github.com/aristanetworks/avd/pull/3195

### Other Fixed issues

- Fix - ip reachability test with l3dge endpoint not managed by AVD by @spangoli-arista in https://github.com/aristanetworks/avd/pull/3140
- Fix(eos_config_deploy_cvp) - Avoid duplicate AVD configlet by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3124
- Fix(plugins) - Raise AnsibleFilterError when range is invalid by @gmuloc in https://github.com/aristanetworks/avd/pull/3163
- Fix(eos_validate_state) - ANTA VerifyRoutingProtocolModel now only run if there is BGP configuration by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/3212

### Documentation

- Doc - Add updated requirements for jsonschema in 4.2.0 by @gmuloc in https://github.com/aristanetworks/avd/pull/3157
- Doc - Custom templates docs by @andsouth44 in https://github.com/aristanetworks/avd/pull/3150
- Doc - Reorder schema tables with dynamic keys first by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3216
- Doc - Update AVD project maintainers by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3196
- Doc(eos_designs) - Clarify evpn_multicast required for evpn_l2/l3_multicast by @jonxstill in https://github.com/aristanetworks/avd/pull/3156
- Doc(eos_cli_config_gen) - Fix spacing in router-bgp documentation template by @gmuloc in https://github.com/aristanetworks/avd/pull/3197

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen) - Support of a global tacacs timeout by @mmaaloul in https://github.com/aristanetworks/avd/pull/3173
- Feat(eos_cli_config_gen) - Support STUN by @burnyd in https://github.com/aristanetworks/avd/pull/3147
- Feat(eos_cli_config_gen) - Add ECN Support by @chetryan in https://github.com/aristanetworks/avd/pull/2770
- Feat(eos_cli_config_gen) - Implement next-hop resolution disabled for evpn address-family by @gmuloc in https://github.com/aristanetworks/avd/pull/3218
- Feat(eos_cli_config_gen) - Add IPv4 and IPv6 SR-TE address families by @gmuloc in https://github.com/aristanetworks/avd/pull/3217
- Feat(eos_cli_config_gen) - Support of route-target route-map for BGP VRFs by @mmaaloul in https://github.com/aristanetworks/avd/pull/3222
- Feat(eos_cli_config_gen) - Add support for BGP link-state address-family by @gmuloc in https://github.com/aristanetworks/avd/pull/3211
- Feat(eos_cli_config_gen) - Ethernet interfaces ip address dhcp support by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3229
- Feat(eos_cli_config_gen) - Add ip security by @gmuloc in https://github.com/aristanetworks/avd/pull/3194
- Feat(eos_cli_config_gen) - Support path-selection bgp address-family by @burnyd in https://github.com/aristanetworks/avd/pull/3151
- Feat(eos_cli_config_gen) - Add 'router service-insertion' CLI by @gmuloc in https://github.com/aristanetworks/avd/pull/3220
- Feat(eos_cli_config_gen) - Add Dps1 interface by @gmuloc in https://github.com/aristanetworks/avd/pull/3198
- Feat(eos_cli_config_gen) - add system l1 support by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3221
- Feat(eos_cli_config_gen) - Add support for flow tracking hardware by @gmuloc in https://github.com/aristanetworks/avd/pull/3199

### New features and enhancements in eos_designs

- Feat(eos_designs) - Support multiple descriptions in connected_endpoint adapters by @pvinci-arista in https://github.com/aristanetworks/avd/pull/2966
- Feat(eos_designs) - VTEP override option on node-definitions by @emilarista in https://github.com/aristanetworks/avd/pull/3133
- Feat(eos_designs) - Add default_interface_mtu and feature_support.per_interface_mtu by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3128
- Feat(eos_designs) - Enhance SNMP support by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3083
- Feat(eos_designs) - EVPN vlan-aware-bundle option for l2vlan  by @bjmeuer in https://github.com/aristanetworks/avd/pull/3075
- Feat(eos_designs) - Build AVD topology from CloudVision I&T Studio data by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3223

### Other new features and enhancements

- Feat - Support inline comments in requirements.txt by @gmuloc in https://github.com/aristanetworks/avd/pull/3125
- Feat(plugins) - Add deprecation for ansible-core<2.14 and python 3.8 by @gmuloc in https://github.com/aristanetworks/avd/pull/3187
- Feat(eos_validate_state) - Add ANTA integration to eos_validate_state role by @gmuloc in https://github.com/aristanetworks/avd/pull/3171
- Feat(eos_config_deploy_cvp) - Add support for device_inventory_mode by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2561

## Release 4.3.0

- AVD now supports ansible-core from **2.12.6** to **2.15.x** excluding **2.13.0**

  If Ansible is installed using pip, a supported version can be installed with `pip3 install "ansible-core>=2.12.6,<2.16.0,!=2.13.0"`.

### Fixed issues in eos_designs

- Fix(eos_designs) - Fix schema for BGP peers to allow shutdown key by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3100
- Fix(eos_designs) - Don't require "mlag_peer_l3_ipv4_pool" with full rfc5549 by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3106
- Fix(eos_designs) - Ensure consistent ordering of underlay route-maps by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3105

### Documentation

- Doc - Insert license header in all source files by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3092
- Doc - Minor typo fixes on internal notes documentation by @JulioPDX in https://github.com/aristanetworks/avd/pull/3093
- Doc - avd to cvaas by @kgiusti4130 in https://github.com/aristanetworks/avd/pull/3089
- Doc - Add license header to YAML source files. by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3099

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen) - add dot1x unauthorized access/native vlan membership egress to ethernet interfaces by @kmueller68 in https://github.com/aristanetworks/avd/pull/3073
- Feat(eos_cli_config_gen) - Allow TCAM profile local file configuration by @xaviramon in https://github.com/aristanetworks/avd/pull/2833
- Feat(eos_cli_config_gen) - Add support for "include leaked" under BGP redistribution by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3071
- Feat(eos_cli_config_gen) - Add Trident MMU queue by @chetryan in https://github.com/aristanetworks/avd/pull/2835
- Feat(eos_cli_config_gen) - Add priority flow control to qos profile by @chetryan in https://github.com/aristanetworks/avd/pull/2796
- Feat(eos_cli_config_gen) - Add support for ftp/tftp/telnet client source interfaces by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3080
- Feat(eos_cli_config_gen) - Support accounting logging by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/3091

### New features and enhancements in eos_designs

- Feat(eos_designs) - Add control for redistribution of MLAG peering subnet by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3069
- Feat(eos_designs) - Validation of structured_config by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3077
- Feat(eos_designs) - Add support for setting source-interfaces for management protocols by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3072

### Other Changes

- Bump - Add support for Ansible 2.15.x by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3070
- Refactor(eos_designs) - Deprecate cvp_instance_ip in favor of cvp_instance_ips by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3028
- Refactor(eos_designs) - Optimize connected endpoints temp data storage by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3094

## Release 4.2.0

### Changes to requirements

- AVD now requires an upper bound on the version of the Python package `jsonschema>=4.5.1,<4.18`.<br>
  A supported version can be installed with `pip install "jsonschema>=4.5.1,<4.18"`.

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen) - Force domain_identifier to be a string by @hamptonmoore in https://github.com/aristanetworks/avd/pull/2997
- Fix(eos_cli_config_gen) - Fixing management_api_http.protocol_https_certificate error by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3023
- Fix(eos_cli_config_gen) - Relax schema for empty prefix-lists by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3008
- Fix(eos_cli_config_gen) - Fix router_isis.instance schema by @tgodaA in https://github.com/aristanetworks/avd/pull/3050
- Fix(eos_cli_config_gen) - Support vars on play via `vars` or `vars_files` by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2999

### Fixed issues in eos_designs

- Fix(eos_designs) - Incorrect type for ospf.area in network services keys by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2998
- Fix(eos_designs) - Duplicate neighbor_interfaces in rfc5549 design when multiple uplinks to the same Spine by @gmuloc in https://github.com/aristanetworks/avd/pull/3054

### Other Fixed issues

- Fix(eos_config_deploy_cvp) - device_filter is not behaving correctly if input is a string by @gmuloc in https://github.com/aristanetworks/avd/pull/3046

### Documentation

- Doc(eos_designs, eos_cli_config_gen) - Various doc improvements by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3001

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen) - Generate sFlow egress commands by @xaviramon in https://github.com/aristanetworks/avd/pull/2767
- Feat(eos_cli_config_gen) - add support for password complexity policies by @hamptonmoore in https://github.com/aristanetworks/avd/pull/2991
- Feat(eos_cli_config_gen) - Add global logging event storm-control by @kmueller68 in https://github.com/aristanetworks/avd/pull/2994
- Feat(eos_cli_config_gen) - Flow tracking table size by @chetryan in https://github.com/aristanetworks/avd/pull/2838
- Feat(eos_cli_config_gen) - ECN Propagation by @chetryan in https://github.com/aristanetworks/avd/pull/2841
- Feat(eos_cli_config_gen) - Add support for eos_cli under router_ospf process ids by @KyleMui in https://github.com/aristanetworks/avd/pull/3035

### New features and enhancements in eos_designs

- Feat(eos_designs) - Fabric IP Addressing MLAG same_subnet addressing algorithm by @hamptonmoore in https://github.com/aristanetworks/avd/pull/2987
- Feat(eos_designs) - Adding structured_config to l3_edge P2P_links by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3017
- Feat(eos_designs) - Sflow configuration at fabric level by @xaviramon in https://github.com/aristanetworks/avd/pull/2775

### New features and enhancement in both eos_designs and eos_cli_config_gen

- Feat(eos_designs,eos_cli_config_gen) - Add hostname to structured configuration by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3016

### Other new features and enhancements

- Feat(plugins) - Make setting of switch fact optional for yaml_templates_to_facts by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3022
- Feat(dhcp_provisioner) - Adding support for automatic dict_to_list conversion in ztp_configuration template by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3012

### Other Changes

- Refactor(eos_designs) - Combine core_interfaces and l3_edge python_modules by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3003
- Refactor - Adjust pyavd API and requirements by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/3018
- Refactor(eos_designs) - Using common method for raising duplicate detection error in python_modules by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3033
- Refactor(eos_designs) - Deprecating port_channel.short_esi under connected_endpoints by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/3027

## Release 4.1.0

### Fixed issues in eos_designs

- Fix(eos_designs) - Schema validation for connected endpoints not executed by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2984
- Fix(eos_designs) - Sort internal objects for consistent output by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2988

### Other Fixed issues

- Fix(cvp_configlet_upload) - Add requirements checks by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2990

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen) - Add comments to queue by @chetryan in https://github.com/aristanetworks/avd/pull/2864
- Feat(eos_cli_config_gen) - Add OSPF default_information_originate options by @gusmb in https://github.com/aristanetworks/avd/pull/2896
- Feat(eos_cli_config_gen) - Add trust and chain certificate by @tgodaA in https://github.com/aristanetworks/avd/pull/2804

### New features and enhancements in eos_designs

- Feat(eos_designs) - Add support for POE settings under connected endpoints by @jrecchia1029 in https://github.com/aristanetworks/avd/pull/2975
- Feat(eos_designs) - Enhance RD/RT assignments options by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2893
- Feat(eos_designs) - Compact MLAG allocations #2903 by @hamptonmoore in https://github.com/aristanetworks/avd/pull/2946
- Feat(eos_designs) - Make BFD configurable under bgp_peer_groups by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2890
- Feat(eos_designs) - Support setting "ptp.auto_clock_identity: false" as group/hostvar by @nielsjlarsen in https://github.com/aristanetworks/avd/pull/2815
- Feat(eos_designs) - Support for underlay_multicast RPs and Anycast-RP by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2846

### Other new features and enhancements

- Feat: pyavd alpha by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2989

### Other Changes

- Refactor(eos_cli_config_gen) - Minor adjustments to prepare for pyavd by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2986

## Release 4.0.0

### Changes to requirements

- AVD now requires ansible-core from **2.12.6** to **2.14.x** excluding **2.13.0**
!!! note
    Excluded version **2.13.0** has an issue in `ansible-core`, which is [fixed](https://github.com/ansible/ansible/blob/v2.13.1/changelogs/CHANGELOG-v2.13.rst#bugfixes) in **2.13.1**. Plugin loader will now load config data for plugin by name instead of by file to avoid issues with the same file being loaded under different names (Fully-Qualified-Collection-Name + short-name).

  If Ansible is installed using pip, a supported version can be installed with `pip3 install "ansible-core>=2.12.6,<2.15.0,!=2.13.0"`.

- The `arista.avd` collection no longer depends directly on `ansible.netcommon`. `ansible.netcommon` is still a dependency of `arista.eos` and `arista.cvp`, which are both dependencies of `arista.avd`.

- AVD now requires the minimum versions of the following Ansible collections:
  - arista.cvp version 3.6.1 or later.
  - arista.eos version 6.0.1 or later.
  - ansible.utils version 2.10.3 or later.

- AVD now requires `cvprac` python library to be version 1.3.1 or higher.

### Data model changes from "dict-of-dicts" to "list-of-dicts"

In AVD 4.0.0 and across both `eos_designs` and `eos_cli_config_gen`, *all* "dict-of-dicts" data models with user-defined keys have been changed to "list-of-dicts".

As an example `ethernet_interfaces` has been changed from:

```yaml
ethernet_intefaces:
  Ethernet1:   # <-- User defined key
    <...>
```

to:

```yaml
ethernet_interfaces:
  - name: Ethernet1   # <-- "name" here is called the "primary_key" which must have a unique value across all list elements
    <...>
```

The old data models are still supported, but support will be removed in AVD 5.0.0.

In AVD 4.0.0, inputs will be auto-converted as part of the new built-in schema-based type conversion, but the variable files will not be changed.

See details on how to migrate to the new data models in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#data-model-changes-from-dict-of-dicts-to-list-of-dicts).

### All eos_designs and eos_cli_config_gen variables are validated by schemas

In AVD 4.0.0, all eos_designs and eos_cli_config_gen keys are validated by schemas.
If additional custom keys are desired, a key starting with an underscore `_`, will be ignored.

### Breaking or behavioral changes in eos_cli_config_gen

Breaking changes may require modifications to the inventory or playbook. See the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md)
for details.

#### Non port-channel related config is no longer ignored on port-channel member ethernet_interfaces

The change has been incorporated into `eos_designs` so action is only required when defining new interfaces
with `structured_config`, `custom_structured_configuration_` or when using `eos_cli_config_gen` directly.

With AVD 4.0.0 port-channel member interfaces defined under `ethernet_interfaces` will no longer ignore the
`type` setting which defaults to `switched`. Other switchport or IP related features are also no longer ignored.

For interfaces with LACP fallback, this may be the intended behavior, and this is the reason for this change.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#non-port-channel-related-config-is-no-longer-ignored-on-port-channel-member-ethernet_interfaces).

Pull request:

- Feat(eos_designs, eos_cli_config_gen)! - Remove default "switchport" and remove logic from eos_cli_config_gen by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2430

#### Require queue_monitor_length.enabled

To avoid ambiguous YAML data input, the data model for `queue_monitor_length` has been updated to require the `enabled` key to be set.

The change has been incorporated into `eos_designs` so action is only required when defining `structured_configuration` directly.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#require-enabled-key-under-queue_monitor_length).

Pull request:

- Refactor(eos_cli_config_gen)! - Require queue_monitor_length.enabled to be set by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/2429

#### Disabling IGMP Snooping globally no longer blocks other IGMP snooping configuration

The `eos_cli_config_gen` role previously blocked IGMP snooping configuration if `ip_igmp_snooping.globally_enabled` was set to `false`.
With AVD version 4.0.0 this changes to align closer to EOS behavior, where globally disabling IGMP snooping still allows for underlying
configuration to be present.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#new-behavior-for-ip_igmp_snooping).

Pull request:

- Feat(eos_designs)! - Remove default value from mlag_peer_link_allowed_vlans by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2845

#### New required vlan_interfaces.[].ip_attached_host_route_export.enabled key

To avoid ambiguous YAML data input, the data model for `vlan_interfaces.[].ip_attached_host_route_export` has been updated to require
an `enabled: true` key to be added.

The change has been incorporated into `eos_designs` so action is only required when defining `structured_configuration` directly.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#new-required-enabled-key-under-vlan_interfacesip_attached_host_route_export).

Pull request:

- Refactor(eos_cli_config_gen)! - Require `enabled - true` under `vlan_interfaces.[].ip_attached_host_route_export` by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2773

#### New data model for BGP VRF address-families

New data models to replace the now deprecated `router_bgp.vrfs[].address_families` keys have been added to eos_cli_config_gen.

The change has been incorporated into `eos_designs` so no action is necessary to retain the same functionality.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#new-data-model-for-bgp-vrf-address-families)

#### Replacement data model for `next_hop.address_family_ipv6_originate` under `router_bgp.address_family_ipv4.peer_groups[]`

The data model to turn on ipv4 routing over ipv6 next-hops has been replaced with a new extended one, the old data model has been deprecated and will be removed in AVD version 5.0.0.

The change has been incorporated into `eos_designs` so no action is necessary to retain the same functionality.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#replacement-data-model-for-next_hopaddress_family_ipv6_originate-under-router_bgpaddress_family_ipv4peer_groups)

#### Improved hardware_counters.features data model

The `hardware_counters.features` model has been improved to allow more options.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#hardware_counters.features).

Pull requests:

- Feat(eos_cli_config_gen)! - Change Hardware Counder model by @gmuloc in https://github.com/aristanetworks/avd/pull/2695

#### `eos_cli_config_gen` sanitized device documentation

- Starting AVD 4.0.0, the `eos_cli_config_gen` role replaces sensitive values in the device documentation by the string `<removed>` by default, similar to the output of `show run sanitized` on EOS.
- It is also possible to generate the intended configurations by replacing the sensitive data by `<removed>` but this is not the case by default
- This behavior can be controlled using the following variables:

    ```yaml
    eos_cli_config_gen_documentation:
      hide_passwords: <bool> # default true
    eos_cli_config_gen_configuration:
      hide_passwords: <bool> # default false
    ```

**NOTE:** The `structured_config` generated by `eos_designs` role cannot be sanitized.

### Breaking or behavioral changes in eos_designs

Breaking changes may require modifications to the inventory or playbook. See the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md)
for details.

#### Custom structured configuration behavioral change

Related to the data model changes mentioned [above](#data-model-changes-from-dict-of-dicts-to-list-of-dicts), the behavior of
`custom_structured_configuration_*` and `structured_config` keys has also changed:

1. The default list merge strategy set with `custom_structured_configuration_list_merge` is now `append_rp` meaning "Append unique items".
   Changed from `replace`.
2. Unless list merge is set to `replace`, the merge of custom structured configuration will now merge list-of-dicts based on the "primary_key" set
   in the schema of the data model, falling back to the list merge strategy.

The custom structured configuration feature is not able to remove individual items from a list. This is not a new limitation, but since
more data models are now lists, this limitation may affect the ability to remove certain elements from the generated configurations.

#### MLAG peer link allowed vlans no longer has a default value

`mlag_peer_link_allowed_vlans` no longer has a default value of "2-4094".

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#mlag-peer-link-allowed-vlans).

#### IP routing is no longer configured on pure L2 devices

For node types like `l2leaf` where `underlay_router` is set to `false` under `node_type_keys` AVD versions below 4.0.0
still rendered `ip routing` in the configuration. With AVD version 4.0.0 `ip routing` is no longer configured for `l2leaf`
or other node types with `underlay_router: false`.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#ip-and-ipv6-routing-is-no-longer-configured-on-pure-l2-devices).

Pull request:

- Fix(eos_designs)! - Prevent configuration of IP routing on l2leaf by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2684

#### BGP is no longer configured on irrelevant nodes

An example of an "irrelevant node" is a pure L3 Spine in L3LS running ISIS or OSPF in the underlay. As long as the spine is not
set as route-server for any overlay BGP protocol, there is no need for `router bgp <asn>` to be configured on this device.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#bgp-is-no-longer-configured-on-irrelevant-nodes).

Pull request:

- Fix(eos_designs)! - Remove BGP rendering on irrelevant nodes by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2774

#### Link-local IPv6 addressing is implicitly enabled when configuring IPv6 Anycast IP

Per Arista best practice, all SVIs configured with `ipv6 address virtual` should also have
`ipv6 enable` configured, to use link-local IPv6 addresses for NDv6 operations.

With AVD version 4.0.0 this best practice is now implemented by default.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#link-local-ipv6-addressing-is-implicitly-enabled-when-configuring-ipv6-anycast-ip).

#### Removed eos_designs variables

- `evpn_rd_type` has been removed and replaced with `overlay_rd_type`.
- `evpn_rt_type` has been removed and replaced with `overlay_rt_type`.
- `vxlan_vlan_aware_bundles` has been removed and replaced with `evpn_vlan_aware_bundles`

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#network-services-variables).

- `bgp_peer_groups.IPv4_UNDERLAY_PEERS` has been removed and replaced with `bgp_peer_groups.ipv4_underlay_peers` to avoid upper-case variables.
- `bgp_peer_groups.MLAG_IPv4_UNDERLAY_PEER` has been removed and replaced with `bgp_peer_groups.mlag_ipv4_underlay_peer` to avoid upper-case variables.
- `bgp_peer_groups.EVPN_OVERLAY_PEERS` has been removed and replaced with `bgp_peer_groups.evpn_overlay_peers` to avoid upper-case variables.
- `connected_endpoints_key.[].adapters.[].server_ports` has been removed and replaced with `connected_endpoints_key.[].adapters.[].endpoint_ports`.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#bgp-variables).

#### Change in defaults in underlay ISIS variables

- `isis_default_circuit_type`  default changed from `level-1-2` (EOS default) to `level-2`.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#isis-underlay-variables).

#### Change in defaults in BGP variables

- `bgp_default_ipv4_unicast: <bool> -> default false` was introduced to implement the best practice of disabling the default activation of IPv4 unicast address-family.
- `bgp_update_wait_install: <bool> -> default true` was introduced to implement the best practice of enable router bgp `update wait-install` under `router bgp` and BGP VRF definitions for VRFs containing BGP peerings.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#bgp-variables).

Pull requests:

- Feat(eos_designs)! - fabric variable for bgp default ipv4 unicast by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2799
- Feat(eos_designs)! - Platform and Fabric variables to adjust update wait-for-convergence and update wait-install by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2855

#### Change in default MTU for point-to-point ethernet interfaces

The default value for `p2p_uplinks_mtu` has changed from 9000 to 9214.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#p2p-uplink-mtu).

Pull request:

- Feat(eos_designs)! - Change p2p_uplinks_mtu default value from 9000 to 9214 by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2844

#### Change in behavior in core_interfaces variables

- `core_interfaces.p2p_links.[].ptp_enable` changed to `core_interfaces.p2p_links.[].ptp.enabled` to create syntax consistency when configuring PTP.
- `core_interfaces.p2p_links.[].ptp.enabled` requires the `ptp.enabled: true` to be set at the fabric level.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#core-interfaces-variables).

#### Change in defaults and behavior in l3_edge variables

- `l3_edge.p2p_links.[].qos_profile` default changed from `null` to now leverage `p2p_uplinks_qos_profile` as its default value.
- `l3_edge.p2p_links.[].include_in_underlay_protocol` default changed from `false` to `true`.
- `l3_edge.p2p_links.[].isis_circuit_type` -> default changed from `level-1-2` (EOS default) set by `isis_default_circuit_type` to `level-2`.
- `l3_edge.p2p_links.[].isis_hello_padding` default changed from `false` to `true` (EOS default).
- `l3_edge.p2p_links.[].ptp_enable` changed to `l3_edge.p2p_links.[].ptp.enabled` to create syntax consistency when configuring PTP.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#l3-edge-variables).

#### Changes to inband management for L2 switches

With AVD version 4.0.0 some of the default values for inband management are changing:

- The SVI MTU was derived from `p2p_uplinks_mtu` with a default value of `9000`. Now the SVI MTU defaults to `1500` and is configurable with `inband_mgmt_mtu`.
- The SVI description was hardcoded to `L2LEAF_INBAND_MGMT`. Now the default SVI description is `Inband Management` and is configurable with `inband_mgmt_description`.
- The VLAN name was hardcoded to `L2LEAF_INBAND_MGMT`. Now the default VLAN name is `INBAND_MGMT` and is configurable with `inband_mgmt_vlan_name`.

The inband management interfaces are now documented and configured as `vlan_interfaces` instead of `management_interfaces`.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#changes-to-inband-management-for-l2-switches).

Pull request:

- Feat(eos_designs)! - Enhance inband management configuration options by @pvinci-arista in https://github.com/aristanetworks/avd/pull/2712

#### Several internal switch.* facts and avd_switch_facts have been removed

As part of optimizing performance and code reuse, the amount of `switch.*` facts has been limited.

The `switch.*` and `avd_switch_facts` are internal datamodels used for sharing data between various stages of `eos_designs`. They **should not**
be used in custom templates for interface descriptions or IP addressing, since they are subject to change without notice.

See the porting guide for suggestions on how to leverage AVD logic in combination with Ansible inline Jinja2.

The following facts have been removed from `switch.*` and `avd_switch_facts.<hostname>.switch.*`:

```yaml
switch.always_configure_ip_routing
switch.always_include_vrfs_in_tenants
switch.bgp
switch.bgp_cluster_id
switch.bgp_defaults
switch.connected_endpoints
switch.default_downlink_interfaces
switch.default_overlay_routing_protocol
switch.default_underlay_routing_protocol
switch.enable_trunk_groups
switch.evpn_gateway_remote_peers
switch.evpn_gateway_vxlan_l2
switch.evpn_gateway_vxlan_l3
switch.evpn_gateway_vxlan_l3_inter_domain
switch.filter_only_vlans_in_use
switch.filter_tags
switch.filter_tenants
switch.hostname
switch.inband_management_gateway
switch.inband_management_interface
switch.inband_management_ip
switch.inband_management_parents
switch.inband_management_role
switch.igmp_snooping_enabled
switch.ipv6_mgmt_ip
switch.ipv6_router_id
switch.ipvpn_gateway
switch.isis_instance_name
switch.isis_net
switch.is_type
switch.lacp_port_id
switch.link_tracking_groups
switch.loopback_ipv4_offset
switch.loopback_ipv6_offset
switch.loopback_ipv6_pool
switch.mlag
switch.mlag_dual_primary_detection
switch.mlag_ibgp_origin_incomplete
switch.mlag_interfaces_speed
switch.mlag_l3
switch.mlag_peer_ip
switch.mlag_peer_ipv4_pool
switch.mlag_peer_l3_ip
switch.mlag_peer_l3_ipv4_pool
switch.mlag_peer_l3_vlan
switch.mlag_peer_l3_vlan_structured_config
switch.mlag_peer_link_allowed_vlans
switch.mlag_peer_mgmt_ip
switch.mlag_peer_vlan
switch.mlag_peer_vlan_structured_config
switch.mlag_port_channel_structured_config
switch.mlag_role
switch.mlag_support
switch.multi_vtep
switch.network_services_l1
switch.network_services_l2
switch.network_services_l3
switch.node_sid
switch.only_local_vlan_trunk_groups
switch.overlay_address_families
switch.overlay_rd_type_admin_subfield
switch.overlay_routing_protocol
switch.overlay_routing_protocol_address_family
switch.platform_settings
switch.rack
switch.raw_eos_cli
switch.short_esi
switch.spanning_tree_mode
switch.spanning_tree_priority
switch.spanning_tree_root_super
switch.struct_cfg
switch.system_mac_address
switch.trunk_groups
switch.underlay
switch.underlay_ipv6
switch.underlay_multicast
switch.underlay_router
switch.uplink_bfd
switch.uplink_interfaces
switch.uplink_interface_speed
switch.uplink_macsec
switch.uplink_ptp
switch.uplink_structured_config
switch.uplink_switches
switch.uplink_switch_interfaces
switch.uplink_type
switch.virtual_router_mac_address
switch.vtep
switch.vtep_loopback
```

### Other breaking or behavioral changes

Breaking changes may require modifications to the inventory or playbook. See the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md)
for details.

#### Roles `cvp_configlet_upload` and `eos_config_deploy_cvp` default to `cv_collection: v3`

The roles `arista.avd.cvp_configlet_upload` and `arista.avd.eos_config_deploy_cvp` leverage modules from the `arista.cvp`
collection to perform actions on the CloudVision platform. These modules are currently available in `v1` and `v3` variants, but `v1` modules
have been deprecated and will be removed from the `arista.cvp` collection in version 4.0.0.

With AVD version 4.0.0 the default `cv_collection` is set to `v3`.

The `v3` modules are mostly compatible with the `v1` modules with a few known gaps:

- `v3` is missing support for hostnames with dots like `leaf1.dc2`.
- The implementation of `v3` in `eos_config_deploy_cvp` is missing support for the `absent` option.

`v1` modules can still be used by setting `cv_collection: v1`, as long as the `arista.cvp` collection is not upgraded to 4.0.0 or above.

Pull request:

- Bump(cvp_configlet_upload,eos_config_deploy_cvp)! - Update the default `cv_collection` from `v1` to `v3` by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2882

#### Change upper case CVP roles and module vars to lower case

Potentially breaking in rare cases where custom logic relies on the registered vars or content of files.
The custom scripts must be updated to use the lowercase variable instead.

Component(s) name
Roles:

- arista.avd.eos_config_deploy_cvp
- arista.avd.cvp_configlet_upload

Modules:

- arista.avd.inventory_to_container
- arista.avd.configlet_build_config

The following vars are changed from uppercase to lowercase, to conform with Ansible linting requirements.

```sh
CVP_CONFIGLETS -> cvp_configlets
CVP_CONFIGLETS_STATUS -> cvp_configlets_status
CVP_CONTAINERS -> cvp_containers
CVP_CONTAINER_RESULTS -> cvp_container_results
CVP_DEVICES -> cvp_devices
CVP_DEVICES_RESULTS -> cvp_devices_results
CVP_FACTS -> cvp_facts
CVP_TOPOLOGY -> cvp_topology
CVP_VARS -> cvp_vars
```

Pull request:

- Fix! - Change uppercase CVP role vars to lower case by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2504

#### Changes to inventory to CloudVision containers

In AVD 4.0.0, the role `arista.avd.eos_config_deploy_cvp` gets support for dynamic Ansible inventories. This means the CloudVision containers' basis will no longer be the `inventory.yml` file. Instead, the role reads the loaded Ansible inventory. This inventory can be loaded from dynamic inventory plugins like Ansible Automation Platform, AWX, etc.

The new inventory parsing is stricter than the previous method, so all Ansible inventory groups *must* be laid
out as a regular tree structure starting from the `container_root`.

See details in the [Porting guide for AVD 4.x.x](../porting-guides/4.x.x.md#inventory-to-cloudvision-containers).

Pull request:

- Feat(eos_config_deploy_cvp)! - Support for dynamic inventories by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2395

### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen) - Render LLDP commands on ethernet_interfaces also for port-channel members by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2386
- Fix(eos_cli_config_gen) - Workaround for router-general EOS CLI issue by @tgodaA in https://github.com/aristanetworks/avd/pull/2408
- Fix(eos_cli_config_gen) - Fix the router_multicast vrfs indentation by @tgodaA in https://github.com/aristanetworks/avd/pull/2476
- Fix(eos_cli_config_gen) - Update radius-server and radius-servers to match EOS behavior by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2615
- Fix(eos_cli_config_gen) - Fix documentation template for flow tracking by @chetryan in https://github.com/aristanetworks/avd/pull/2636
- Fix(eos_cli_config_gen) - Checks for missing "vlans" key on access port-channel by @jonxstill in https://github.com/aristanetworks/avd/pull/2701
- Fix(eos_cli_config_gen) - Fix typo in router-bgp.j2 by @adietrich-ussignal in https://github.com/aristanetworks/avd/pull/2753
- Fix(eos_cli_config_gen) - Ensure unique VRF names in schemas by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2878
- Fix - Logging buffered default level not required by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2364
- Fix - add guard to dot1x mac_based_authentication by @pvinci-arista in https://github.com/aristanetworks/avd/pull/2764

### Fixed issues in eos_designs

- Fix(eos_designs) - Handle overlapping VLAN names for l2vlans and vlan-aware-bundles by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2388
- Fix(eos_designs) - overlay_rd_type with inline jinja generates incorrect config by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2393
- Fix(eos_designs) - Detect duplicate VLAN, VRF, VNI within network_services by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2411
- Fix(eos_designs) - Renders lacp fallback when port-channel mode is passive by @gmuloc in https://github.com/aristanetworks/avd/pull/2448
- Fix(eos_designs) - vtep_vvtep_ip doesn't generate any config by @emilarista in https://github.com/aristanetworks/avd/pull/2442
- Fix(eos_designs) - Fix issue with hardware_counters python code by @gmuloc in https://github.com/aristanetworks/avd/pull/2447
- Fix(eos_designs) - remove speed from port-channel interfaces by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2463
- Fix(eos_designs) - Fix error with dotted hostname, l2leaf and mlag by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2502
- Fix(eos_designs) - Correct range_expand behaviour with .0 4byte ASNs by @jonxstill in https://github.com/aristanetworks/avd/pull/2529
- Fix(eos_designs) - Duplicate route-maps generated when using underlay_filter_peer_as - true by @gmuloc in https://github.com/aristanetworks/avd/pull/2612
- Fix(eos_designs) - Handle overlapping vlan numbers with filter.only_in_use and trunkgroups by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2628
- Fix(eos_designs) - Configure ptp to use the system mac by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2647
- Fix(eos_designs) - Avoid configuring trunk-group twice on mlag peer-link if using the same name by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2658
- Fix(eos_designs) - Duplicate port-channels in structured-config for network-ports by @gmuloc in https://github.com/aristanetworks/avd/pull/2651
- Fix(eos_designs) - Raise correct error message for duplicate port-channels by @gmuloc in https://github.com/aristanetworks/avd/pull/2674
- Fix(eos_designs) - Configure "ip routing ipv6 interface vrf X" for RFC5549 by @gmuloc in https://github.com/aristanetworks/avd/pull/2660
- Fix(eos_designs) - Add support for her and cvx in default_overlay_routing_protocol by @gmuloc in https://github.com/aristanetworks/avd/pull/2717
- Fix(eos_designs) - network services vlan interfaces ospf authentication message-digest by @philippebureau in https://github.com/aristanetworks/avd/pull/2727
- Fix(eos_designs) - Invalid defaults for ipvpn_gateway domain IDs by @emilarista in https://github.com/aristanetworks/avd/pull/2739
- Fix(eos_designs) - Fix wrong error message for duplicates network_ports by @gmuloc in https://github.com/aristanetworks/avd/pull/2756
- Fix(eos_designs) - Configure "ipv6 enable" on SVIs with Anycast IPv6 by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2784
- Fix(eos_designs) - Change authentication method and token path for on-prem token auth by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2800
- Fix(eos_designs) - Re-add the possibility to overwrite network_ports by @gmuloc in https://github.com/aristanetworks/avd/pull/2766
- Fix(eos_designs) - Remove EVPN related config if VRF 'default' is not EVPN enabled by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2888
- Fix(eos_designs) - bgp_mesh_pes by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2899
- Fix(eos_designs) - Support 4.0 data models in Connected Endpoints docs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2915
- Fix(eos_designs) - Ensure deterministic behavior when defining the same VRF in multiple Tenants by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2900
- Fix(eos_designs) - eBGP rfc5549 creates invalid configuration for MLAG scenarios by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2950
- Fix(eos_designs) - Ignore "overlay_routing_protocol_address_family - ipv6" on l2leaf by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2955
- Refactor(eos_designs) - Change description for port-channel members to be the physical peer interface instead of port-channel by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/2949
- Fix - Description key not considered with connected endpoints by @pvinci-arista in https://github.com/aristanetworks/avd/pull/2745

### Other Fixed issues

- Fix(eos_snapshot) - eos snapshot produces incorrect json and yaml output by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2426
- Fix(eos_snapshot) - Only collect cli-text commands when "text" or "markdown" are selected by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2439
- Fix(eos_snapshot) - Conditional in tasks are not honored and support for limit by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2457

### Documentation

- Doc - Add a warning to upgrade the python reqs when upgrading AVD by @gmuloc in https://github.com/aristanetworks/avd/pull/2498
- Doc(eos_designs) - Dual DC example by @xaviramon in https://github.com/aristanetworks/avd/pull/2326
- Doc(eos_designs) - Size recommendations for mlag_peer ip pools by @emilarista in https://github.com/aristanetworks/avd/pull/2599
- Doc(eos_cli_config_gen) - Deprecate old keys under gNMI by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2876
- Doc(eos_designs,eos_cli_config_gen) - Add missing deprecation warnings by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2957
- Doc(eos_designs) - ISIS-LDP IPVPN Topology Example by @emilarista in https://github.com/aristanetworks/avd/pull/2759
- Doc - Updating the landing page, move the collection below AVD umbrella by @JulioPDX in https://github.com/aristanetworks/avd/pull/2587
- Doc - Update Single DC L3LS example by @nielsjlarsen in https://github.com/aristanetworks/avd/pull/2803
- Doc - Update Dual DC L3LS example by @xaviramon in https://github.com/aristanetworks/avd/pull/2904

### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen) - Add eos_cli key to management_interfaces by @gusmb in https://github.com/aristanetworks/avd/pull/2379
- Feat(eos_cli_config_gen) - Add arp learning bridged by @tgodaA in https://github.com/aristanetworks/avd/pull/2383
- Feat(eos_cli_config_gen) - Add support for load-interval on Ethernet Interfaces by @RyanM-Arista in https://github.com/aristanetworks/avd/pull/2428
- Feat(eos_cli_config_gen) - Trim documentation output to only show configured sections by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2357
- Feat(eos_cli_config_gen) - Extend aaa_accounting with options for dot1x by @dmilyt in https://github.com/aristanetworks/avd/pull/2450
- Feat(eos_cli_config_gen) - Support encapsulation for EVPN peer groups by @wnagele in https://github.com/aristanetworks/avd/pull/2540
- Feat(eos_cli_config_gen) - Add aaa authorization policy and dynamic by @tgodaA in https://github.com/aristanetworks/avd/pull/2440
- Feat(eos_cli_config_gen) - Add Sflow config for ethernet and port_channel interfaces by @UchihaItachiSama in https://github.com/aristanetworks/avd/pull/1805
- Feat(eos_cli_config_gen) - Support ND parameters inside router_l2_vpn the same as ARP by @wnagele in https://github.com/aristanetworks/avd/pull/2538
- Feat(eos_cli_config_gen) - add event-handler trigger "on-startup-config" by @bjmeuer in https://github.com/aristanetworks/avd/pull/2486
- Feat(eos_cli_config_gen) - Add 'route_reflector_client' key to BGP neighbor in VRF by @gusmb in https://github.com/aristanetworks/avd/pull/2551
- Feat(eos_cli_config_gen) - CVX Client non-default VRF support by @UchihaItachiSama in https://github.com/aristanetworks/avd/pull/2545
- Feat(eos_cli_config_gen) - Add support for shell for local users by @gmuloc in https://github.com/aristanetworks/avd/pull/2581
- Feat(eos_cli_config_gen) - Add support for as-path options for BGP neighbors by @gusmb in https://github.com/aristanetworks/avd/pull/2591
- Feat(eos_cli_config_gen) - extend ethernet_interface with dot1x eapol authentication_failure_falback by @dmilyt in https://github.com/aristanetworks/avd/pull/2482
- Feat(eos_cli_config_gen) - extend radius_servers with attribute 32 include in access and dynamic-authorization by @dmilyt in https://github.com/aristanetworks/avd/pull/2523
- Feat(eos_cli_config_gen) - Add support for passive BGP neighbor by @gusmb in https://github.com/aristanetworks/avd/pull/2568
- Feat(eos_cli_config_gen) - Add ipv6 dhcp relay to vlan/ethernet-interfaces by @emilarista in https://github.com/aristanetworks/avd/pull/2585
- Feat(eos_cli_config_gen) - extend dot1x with radius av-pair and mac based authentication. by @dmilyt in https://github.com/aristanetworks/avd/pull/2446
- Feat(eos_cli_config_gen) - Deprecation of 'vlan_interfaces.ipv6_address_virtual' (singular) by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2613
- Feat(eos_cli_config_gen) - add cvsourceintf flag to TerminAttr by @noredistribution in https://github.com/aristanetworks/avd/pull/2620
- Feat(eos_cli_config_gen) - Global IP Locking Configuration Options by @emilarista in https://github.com/aristanetworks/avd/pull/2560
- Feat(eos_cli_config_gen) - Add support for CVX as VXLAN controller by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2657
- Feat(eos_cli_config_gen) - Enable redistribution of leaked (static, connected, bgp) routes into OSPF by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/2639
- Feat(eos_cli_config_gen) - Add address locking options on ethernet interfaces by @emilarista in https://github.com/aristanetworks/avd/pull/2564
- Feat(eos_cli_config_gen) - Add support for BGP session tracking by @gmuloc in https://github.com/aristanetworks/avd/pull/2659
- Feat(eos_cli_config_gen) - add certs method to cvauth in TerminAttr by @noredistribution in https://github.com/aristanetworks/avd/pull/2699
- Feat(eos_cli_config_gen) - New improved ip_name_servers and deprecate name_server by @gmuloc in https://github.com/aristanetworks/avd/pull/2738
- Feat(eos_cli_config_gen) - Add support for PoE configurations by @jrecchia1029 in https://github.com/aristanetworks/avd/pull/2690
- Feat(eos_cli_config_gen) - L2 Protocol Forwarding by @emilarista in https://github.com/aristanetworks/avd/pull/2676
- Feat(eos_cli_config_gen) - Allow configuration of IGMP snooping features even if globally disabled by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2686
- Feat(eos_cli_config_gen) - Add support for grpc-tunnel by @adietrich-ussignal in https://github.com/aristanetworks/avd/pull/2696
- Feat(eos_cli_config_gen) - Add global IP NAT support by @kornoa in https://github.com/aristanetworks/avd/pull/2747
- Feat(eos_cli_config_gen) - Add support for bgp default ipv4-unicast under router bgp by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2789
- Feat(eos_cli_config_gen) - Add support for "ip_igmp_version" under "vlan_interfaces" by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2792
- Feat(eos_cli_config_gen) - Add ethernet_interfaces logging event options by @kornoa in https://github.com/aristanetworks/avd/pull/2783
- Feat(eos_cli_config_gen) - Add service-policy qos by @chetryan in https://github.com/aristanetworks/avd/pull/2793
- Feat(eos_cli_config_gen) - Default queue-monitor thresholds by @chetryan in https://github.com/aristanetworks/avd/pull/2794
- Feat(eos_cli_config_gen) - Add port-channel esi and rt deprecation warnings by @emilarista in https://github.com/aristanetworks/avd/pull/2443
- Feat(eos_cli_config_gen) - Add interface IP NAT support by @kornoa in https://github.com/aristanetworks/avd/pull/2750
- Feat(eos_cli_config_gen) - Add capability to hide passwords and keys in generated doc and conf by @gmuloc in https://github.com/aristanetworks/avd/pull/2806
- Feat(eos_cli_config_gen) - add options tagged and untagged phone to switchport phone trunk for ethernet interfaces by @kmueller68 in https://github.com/aristanetworks/avd/pull/2832
- Feat(eos_cli_config_gen) - BGP RR preserve-attributes by @emilarista in https://github.com/aristanetworks/avd/pull/2879
- Refactor(eos_cli_config_gen, eos_designs) - Improve BGP VRF Address Families Model by @emilarista in https://github.com/aristanetworks/avd/pull/2808
- Refactor(eos_cli_config_gen) - Add guards for missing name for hardware_counters legacy syntax by @gmuloc in https://github.com/aristanetworks/avd/pull/2741
- Refactor(eos_cli_config_gen,eos_designs) - Deprecate isis_af_defaults and address_family knobs by @emilarista in https://github.com/aristanetworks/avd/pull/2630
- Refactor(eos_cli_config_gen) - Deprecate uppercase `MIB_family_name` in favor of `mib_family_name` by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2772
- Refactor(eos_designs, eos_cli_config_gen) - BGP VRF peer group options, global context ipv6 multicast and flowspec by @emilarista in https://github.com/aristanetworks/avd/pull/2976

### New features and enhancements in eos_designs

- Feat(eos_designs) - Add per MACVRF EVPN domain scope by @MitchV85 in https://github.com/aristanetworks/avd/pull/2347
- Feat(eos_designs) - Add schema validation to eos_designs action plugins by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2350
- Feat(eos_designs) - Support for custom masks in l3_edge ip pools by @philippebureau in https://github.com/aristanetworks/avd/pull/2466
- Feat(eos_designs) - User defined description on management interface by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2500
- Feat(eos_designs) - User defined descriptions on l3_edge and core_interfaces by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2499
- Feat(eos_designs) - Uplink native vlan for l2 switches by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2522
- Feat(eos_designs) - Only require 'virtual_router_mac_address' when using VARP or anycast IP on SVIs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2485
- Feat(eos_designs) - Allow disabling filtering on redist connected in underlay bgp by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2586
- Feat(eos_designs) - Add support for overlay_routing_protocol CVX by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2600
- Feat(eos_designs) - Add Ipv6 management variables by @emilarista in https://github.com/aristanetworks/avd/pull/2335
- Feat(eos_designs) - Support for custom masks in core_interfaces ip pools by @philippebureau in https://github.com/aristanetworks/avd/pull/2469
- Feat(eos_designs) - Improve CVX Overlay support by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2656
- Feat(eos_designs) - Add support for serial_number by @gmuloc in https://github.com/aristanetworks/avd/pull/2645
- Feat(eos_designs) - Add support for TerminAttr token-secure auth for on-premise CV by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2685
- Feat(eos_designs) - Allow to redistribute connected routes under OSPF by @mpergament in https://github.com/aristanetworks/avd/pull/2762
- Feat(eos_designs) - Add support for setting "mlag_domain_id" by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2791
- Feat(eos_designs) - Allow LACP timers configuration under connected_endpoints by @xaviramon in https://github.com/aristanetworks/avd/pull/2809
- Feat(eos_designs) - update PTP syntax "enable" -> "enabled" by @nielsjlarsen in https://github.com/aristanetworks/avd/pull/2776
- Feat(eos_designs) - use proper structured config knobs for bgp maximum paths by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2868
- Feat(eos_designs) - Fabric variable to set bgp distance by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2869
- Doc(eos_designs) - Add connected_endpoints fabric documentation by @gmuloc in https://github.com/aristanetworks/avd/pull/2458
- Refactor(eos_designs) - Use python for all default interface descriptions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2490
- Refactor(eos_designs) - Change default native vlan name by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2563
- Refactor(eos_designs) - Relax requirement for 'id' if not used by @gmuloc in https://github.com/aristanetworks/avd/pull/2661
- Cut - Remove globally defined defaults for underlay_routing_protocol and overlay_routing_protocol variables by @carlbuchmann in https://github.com/aristanetworks/avd/pull/2691
- Refactor(eos_designs) - Move default variables to python instead of role defaults. by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2760
- Refactor(eos_designs) - Remove vxlan_vlan_aware_bundles in favor of evpn_vlan_aware_bundles by @Shivani-chourasiya in https://github.com/aristanetworks/avd/pull/2865

### Other new features and enhancements

- Feat(plugins) - Add schema driven deprecation warnings by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2369
- Feat(plugins) - Automatic requirements check by @gmuloc in https://github.com/aristanetworks/avd/pull/2015
- Feat(plugins) - Add arista.avd.batch_template action plugin by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2593
- Feat(plugins) - Add OSPF password type 7 to encrypt/decrypt filters by @gmuloc in https://github.com/aristanetworks/avd/pull/2626
- Feat(plugins) - Update schema validation to ignore any key starting with underscore by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2689
- Feat(eos_config_deploy_cvp) - Option for deploying using serial number as identifier by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/2718
- Feat(plugins) - Add arista.avd.global_vars plugin by @gmuloc in https://github.com/aristanetworks/avd/pull/2751
- Refactor(eos_cli_config_gen,eos_designs) - Remove multiple H1 headings by @JulioPDX in https://github.com/aristanetworks/avd/pull/2632
