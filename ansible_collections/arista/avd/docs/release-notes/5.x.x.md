---
# This title is used for search results
title: Release Notes for AVD 5.x.x
---
<!--
  ~ Copyright (c) 2024 Arista Networks, Inc.
  ~ Use of this source code is governed by the Apache License 2.0
  ~ that can be found in the LICENSE file.
  -->

# Release Notes for AVD 5.x.x

- Documentation for AVD version `5.x.x` [available here](https://avd.arista.com/stable/)

## Release 5.0.0

### Changes to requirements

- AVD v.5.0.0 requires Python version 3.10 or newer.
- AVD now requires the `cvprac` Python library to be version 1.4.0 or higher.<br>
  The latest version can be installed with `pip install "cvprac>=1.4.0" --upgrade`.

### Removal of Ansible components

The following ansible components have been removed from the `arista.avd` Ansible collection in v5.0.0.

Filters:

- `arista.avd.convert_dicts`
- `arista.avd.hash_passphrase`
- `arista.avd.generate_esi`
- `arista.avd.generate_lacp_id`
- `arista.avd.generate_route_target`

Action plugins / Modules:

- `arista.avd.deploy_to_cv`
- `arista.avd.batch_template`
- `arista.avd.validate_and_template`
- `arista.avd.yaml_templates_to_facts`
- `arista.avd._emit_warning`

Roles:

- `arista.avd.deploy_to_cv`

See the [porting guide](../porting-guides/5.x.x.md#removal-of-ansible-components) for details.

### Removal of Ansible tags from AVD roles

Support for Ansible tags across AVD roles has been replaced with variables to control the execution of various parts of AVD.

The previous implementation of Ansible tags needed to be more consistent, and they were mostly undocumented. It often led to inconsistent behaviors depending on when the tags were used with `--tags` vs. `--skip-tags`.

See the [porting guide](../porting-guides/5.x.x.md#removal-of-ansible-tags-from-avd-roles) for details.

### Data model changes from "dict-of-dicts" to "list-of-dicts"

In AVD 4.0.0 and across both `eos_designs` and `eos_cli_config_gen`, *all* "dict-of-dicts" data models with user-defined keys were changed to "list-of-dicts".
In AVD 4.x inputs were auto-converted to the new data models.

As of AVD 5.0.0 the automatic conversion from dict-of-dicts has been removed, so it is required to update the input data to the new data models.
The `avd_data_conversion_mode` key has also been removed.

See the [porting guide](../porting-guides/5.x.x.md#data-model-changes-from-dict-of-dicts-to-list-of-dicts) for details.

### All eos_designs and eos_cli_config_gen variables are always validated by schemas

In AVD 5.0.0, all `eos_designs` and `eos_cli_config_gen` keys are validated by schemas and execution will stop for any violations.
If additional custom keys are desired, a key starting with an underscore `_` will be ignored.

!!! danger
    The input variable `avd_data_validation_mode` now has a default value of `error`, and while it can be set to `warning`, this is highly discouraged.
    All AVD code relies on the validation to ensure valid data, so the code assumes that the data is valid.

    If the validation mode is set to `warning`, execution will continue with invalid data, which can lead to hard-to-read errors or incorrect behavior.

### Breaking or behavioral changes in eos_designs

Breaking changes may require modifications to the inventory or playbook. See the [Porting guide for AVD 5.x.x](../porting-guides/5.x.x.md#changes-to-role-aristaavdeos_designs)
for details.

| Detailed changes and link to porting guide |
| ------------------------------------------ |
| [Deprecation of design.type](../porting-guides/5.x.x.md#deprecation-of-designtype) |
| [Removed `redistribute igmp` from BGP VLAN config belonging to a VRF with EVPN Multicast](../porting-guides/5.x.x.md#removed-redistribute-igmp-from-bgp-vlan-config-belonging-to-a-vrf-with-evpn-multicast) |
| [`vrf_id` is used instead of `vrf_vni` to calculate the IP address of EVPN underlay multicast group for a VRF](../porting-guides/5.x.x.md#vrf_id-is-used-instead-of-vrf_vni-to-calculate-the-ip-address-of-evpn-underlay-multicast-group-for-a-vrf) |
| [Base class for custom IP addressing `AvdIpAddressing` was moved](../porting-guides/5.x.x.md#base-class-for-custom-ip-addressing-avdipaddressing-was-moved) |
| [The base class for custom interface descriptions `AvdInterfaceDescriptions` was moved](../porting-guides/5.x.x.md#the-base-class-for-custom-interface-descriptions-avdinterfacedescriptions-was-moved) |
| [Removal of deprecated data models](../porting-guides/5.x.x.md#removal-of-deprecated-data-models) |
| [The default platform settings for R3-series now have the TCAM profile "vxlan-routing"](../porting-guides/5.x.x.md#the-default-platform-settings-for-r3-series-now-have-the-tcam-profile-vxlan-routing) |
| [Default value for OSPF area has been updated to `0.0.0.0`](../porting-guides/5.x.x.md#default-value-for-ospf-area-has-been-updated-to-0000) |
| [Structured Configuration merged from SVI profiles is now deep merged instead of replaced](../porting-guides/5.x.x.md#structured-configuration-merged-from-svi-profiles-is-now-deep-merged-instead-of-replaced) |
| [MLAG L3 Peering VLAN 4093 is no longer created when `underlay_routing_protocol: 'none'`](../porting-guides/5.x.x.md#mlag-l3-peering-vlan-4093-is-no-longer-created-when-underlay_routing_protocol-none) |
| [BGP is now configured for Network services VRFs even if 'evpn' is not part of the address-families](../porting-guides/5.x.x.md#bgp-is-now-configured-for-network-services-vrfs-even-if-evpn-is-not-part-of-the-address-families) |
| [Connected endpoints and network ports now renders PoE and 802.1x configuration for port-channel members and ignores PoE and 802.1x from LACP fallback individual profile](../porting-guides/5.x.x.md#connected-endpoints-and-network-ports-now-renders-poe-and-8021x-configuration-for-port-channel-members-and-ignores-poe-and-8021x-from-lacp-fallback-individual-profile) |
| [Default interface descriptions are changed for more consistency](../porting-guides/5.x.x.md#default-interface-descriptions-are-changed-for-more-consistency) |
| [Default VLAN names are changed for more consistency](../porting-guides/5.x.x.md#default-vlan-names-are-changed-for-more-consistency) |
| [Default BGP peer descriptions are changed for more consistency](../porting-guides/5.x.x.md#default-bgp-peer-descriptions-are-changed-for-more-consistency) |
| [Combine the VLAN trunk groups used for MLAG](../porting-guides/5.x.x.md#combine-the-vlan-trunk-groups-used-for-mlag) |
| [`wan_mode: autovpn` renamed to `wan_mode: legacy-autovpn`](../porting-guides/5.x.x.md#wan_mode-autovpn-renamed-to-wan_mode-legacy-autovpn) |
| [custom\_structured\_configuration\_prefix no longer accepts a string](../porting-guides/5.x.x.md#custom_structured_configuration_prefix-no-longer-accepts-a-string) |
| [default\_overlay\_address\_families and overlay\_address\_families no longer accepts a string](../porting-guides/5.x.x.md#default_overlay_address_families-and-overlay_address_families-no-longer-accepts-a-string) |
| [mpls\_route\_servers no longer accepts a string](../porting-guides/5.x.x.md#mpls_route_servers-no-longer-accepts-a-string) |
| [Default value of `mlag_on_orphan_port_channel_downlink` is changed to `false`](../porting-guides/5.x.x.md#default-value-of-mlag_on_orphan_port_channel_downlink-is-changed-to-false) |
| [An error is raised if sFlow is enabled on an interface but `sflow_settings.destinations` is not set](../porting-guides/5.x.x.md#an-error-is-raised-if-sflow-is-enabled-on-an-interface-but-sflow_settingsdestinations-is-not-set) |
| [Default value of `isis_system_id_format` is changed to `underlay_loopback`](../porting-guides/5.x.x.md#default-value-of-isis_system_id_format-is-changed-to-underlay_loopback) |
| [Shutdown interfaces and BGP towards undeployed peers by default](../porting-guides/5.x.x.md#shutdown-interfaces-and-bgp-towards-undeployed-peers-by-default) |
| [Only render IGMP snooping querier version and address when enabled](../porting-guides/5.x.x.md#only-render-igmp-snooping-querier-version-and-address-when-enabled) |
| [Default MTU value changed from `9214` to `9194` for Dps1, WAN HA, and WAN p2p uplink interfaces](../porting-guides/5.x.x.md#default-mtu-value-changed-from-9214-to-9194-for-dps1-wan-ha-and-wan-p2p-uplink-interfaces) |
| [Default encapsulation for WAN EVPN iBGP peerings changed to `path-selection`](../porting-guides/5.x.x.md#default-encapsulation-for-wan-evpn-ibgp-peerings-changed-to-path-selection) |
| [PREVIEW WAN HA Direct Link now uses Port-Channel by default](../porting-guides/5.x.x.md#preview-wan-ha-direct-link-now-uses-port-channel-by-default) |
| [Prevent redistributing the MLAG peer link subnets into BGP for all VRFs by default](../porting-guides/5.x.x.md#prevent-redistributing-the-mlag-peer-link-subnets-into-bgp-for-all-vrfs-by-default) |

### Breaking or behavioral changes in eos_cli_config_gen

Breaking changes may require modifications to the inventory or playbook. See the [Porting guide for AVD 5.x.x](../porting-guides/5.x.x.md#changes-to-role-aristaavdeos_cli_config_gen)
for details.

| Detailed changes and link to porting guide |
| ------------------------------------------ |
| [`!RANCID-CONTENT-TYPE: arista` is no longer at the top of the generated configurations](../porting-guides/5.x.x.md#rancid-content-type-arista-is-no-longer-at-the-top-of-the-generated-configurations) |
| [No auto-conversion of old data model for `router_bgp.redistribute_routes` and `router_bgp.vrfs[].redistribute_routes`](../porting-guides/5.x.x.md#no-auto-conversion-of-old-data-model-for-router_bgpredistribute_routes-and-router_bgpvrfsredistribute_routes) |
| [Default EOS configuration is no longer automatically generated](../porting-guides/5.x.x.md#default-eos-configuration-is-no-longer-automatically-generated) |
| [`monitor_sessions` no longer requires both `monitor_sessions.sources` and `monitor_sessions.destinations` to be defined for generating configuration](../porting-guides/5.x.x.md#monitor_sessions-no-longer-requires-both-monitor_sessionssources-and-monitor_sessionsdestinations-to-be-defined-for-generating-configuration) |
| [`router_isis.address_family_ipv4/6.enabled` is now required to generate the configuration and documentation for `router_isis` address-families](../porting-guides/5.x.x.md#router_isisaddress_family_ipv46enabled-is-now-required-to-generate-the-configuration-and-documentation-for-router_isis-address-families) |
| [`ip_security.sa_policies[].esp.integrity` and `.encryption` `null` option has been replaced with `disabled`](../porting-guides/5.x.x.md#ip_securitysa_policiesespintegrity-and-encryption-null-option-has-been-replaced-with-disabled) |
| [`router_ospf.redistribute.bgp/connected/static` data model has been updated to require the `enabled` key](../porting-guides/5.x.x.md#router_ospfredistributebgpconnectedstatic-data-model-has-been-updated-to-require-the-enabled-key) |
| [`router_traffic_engineering.enabled` is required](../porting-guides/5.x.x.md#router_traffic_engineeringenabled-is-required) |
| [Removal of `type` key dependency for rendering ethernet/port-channel interfaces configuration and documentation](../porting-guides/5.x.x.md#removal-of-type-key-dependency-for-rendering-ethernetport-channel-interfaces-configuration-and-documentation) |
| [Data models for BGP additional-paths under `router_bgp` has been changed](../porting-guides/5.x.x.md#data-models-for-bgp-additional-paths-under-router_bgp-has-been-changed) |
| [Removal of deprecated data models](../porting-guides/5.x.x.md#removal-of-deprecated-data-models-1) |

### Breaking or behavioral changes in eos_validate_state

Starting AVD 5.0.0, `eos_validate_state` uses ANTA as backend, which will change the default behavior (same as setting `use_anta: true` in the latest AVD 4.x.x versions).
If you have not been using `use_anta: true` in latest versions of AVD 4.x.x, please go through the following sections for details on the changes.

Breaking changes may require modifications to the inventory, input variables or playbooks. See the [Porting guide for AVD 5.x.x](../porting-guides/5.x.x.md#changes-to-role-aristaavdeos_validate_state)
for details.

#### Loose mode is the only supported mode

In the previous implementation, loose mode was used by default to avoid stopping the playbook and hence the tests when they were run task by task in Ansible. It was possible to turn loose mode off with a variable `eos_validate_state_validation_mode_loose: false` that would make the playbook stop at the first failing tasks for whatever reason on each host.

Loose mode is now the default and all the tests are always run and the errors are all present in the final report.

#### Input for hardware tests have been updated

The inputs for the hardware test have changed. See the [porting guide](../porting-guides/5.x.x.md#input-for-hardware-tests-have-been-updated) for details.

#### Filtering tests using Ansible tags support was removed

Instead use the `skip_tests` mechanism. See the [porting guide](../porting-guides/5.x.x.md#filtering-tests-using-ansible-tags-support-was-removed) for details.

#### Changes to CSV and Markdown reports

- Hardware tests are now collapsed.
- Sorting of test results is now done per device as opposed to per category.
- Test categories, descriptions and inputs have been improved to follow ANTA.
- CSV report headers updated from `test_id,node,test_category,test_description,test,result,failure_reason` to `id,dut,categories,test,description,inputs,result,messages`
- Tests skipped by ANTA will be marked as `SKIPPED` in the final reports.

#### Undeployed devices

- All tests will be removed from the catalog for a device flagged as undeployed using the host level variable [`is_deployed: false`](https://avd.arista.com/en/stable/roles/eos_designs/docs/input-variables.html#flagging-a-device-as-not-deployed). Additionally, all tests take into account the `is_deployed` variable value and remove tests accordingly.

!!! warning
    Tests can also be automatically removed from the catalogs depending on the structured configuration of the devices. ANTA is therefore not aware of these tests and they will not appear in the final report. For example, the `AvdTestMLAG` tests will not be present in the test catalog of a device that does not have an MLAG configuration in its structured configuration.

#### BGP test change

- BGP tests will only run if `service_routing_protocols_model` is set to `multi-agent` in the structured configuration file.

!!! note
    Starting from version 4.30.1F, `default service routing protocols` is set to `multi-agent` by default on EOS devices. Details are available [here](https://www.arista.com/en/support/toi/eos-4-30-1f/17697-use-multi-agent-as-default-routing-protocols-model) (TOI article is only available for registered users).

#### Inband management reachability test change

- Inband management reachability test has been refactored to support AVD inband management [data model](https://avd.arista.com/en/stable/roles/eos_designs/docs/input-variables.html#node-type-inband-management).

<!-- Release notes generated using configuration in .github/release.yml at devel -->

### Summary of all changes

#### Breaking Changes

- Fix(eos_designs)!: VARPv6 config is not generated even when "ipv6_enable: true" is specified by @bjmeuer in https://github.com/aristanetworks/avd/pull/4208
- Refactor(eos_cli_config_gen)!: Removing default type: switched from ethernet and port-channel interfaces by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4355
- Refactor(eos_designs)!: Change the default value of `mlag_on_orphan_port_channel_downlink` to `false` by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4371
- Fix(eos_designs)!: Add missing BGP peer description for MLAG peerings in VRFs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4394
- Refactor(eos_designs)!: Change the default value of `isis_system_id_format` to `underlay_loopback` by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4373
- Refactor(eos_designs)!: Change merge strategy for SVI structured_config from SVI profiles by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4383
- Fix(eos_designs)!: Do not render EVPN address-family on MPLS devices unless `overlay_address_families` includes `evpn` by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4390
- Refactor(eos_cli_config_gen)!: Make router_traffic_engineering.enabled required by @gmuloc in https://github.com/aristanetworks/avd/pull/4403
- Feat(eos_designs)!: Update the default platform settings for R3-series to have TCAM profile "vxlan-routing" by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4387
- Fix(eos_cli_config_gen)!: Make `router_isis.address_family_ipv4/6.enabled` Required by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4401
- Feat(eos_designs)!: Improve logic for BGP configuration of network services VRFs by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4358
- Refactor(eos_designs)!: Raise AVD error if sFlow is enabled but `sflow_settings.destinations` is not configured by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4402
- Refactor(eos_cli_config_gen,eos_designs)!: Update router_ospf.redistribute.bgp/connected/static with enabled keys by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4417
- Feat(eos_designs)!: Shutdown interfaces and bgp towards undeployed peers by default by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4424
- Refactor(eos_designs)!: Import AvdIpAddressing class from PyAVD by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4422
- Fix(eos_designs)!: BGP vlan config should not have redistribute igmp when belonging to a VRF with evpn multicast by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4210
- Refactor(eos_designs)!: Change loopback0 description and terminology to router_id_loopback by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4448
- Refactor(eos_designs)!: WAN default MTU set to 9194 for Dps and WAN HA interfaces and for LAN uplink interfaces added `p2p_uplinks_mtu` support in platform settings by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4415
- Refactor(eos_designs)!: Change the default Loopback1 description by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4451
- Refactor(eos_designs)!: Change the default mgmt_interface_description to upper case by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4452
- Refactor(eos_designs)!: Rename wan_mode 'autovpn' to 'legacy-autovpn' by @gmuloc in https://github.com/aristanetworks/avd/pull/4473
- Refactor(eos_designs)!: Only render IGMP snooping querier version and address when enabled by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4478
- Feat(eos_designs)!: Update eos_designs code to generate new switchport model in structured_configs by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4454
- Refactor(eos_designs)!: Combine the VLAN trunk groups used for MLAG by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4494
- Refactor(eos_designs)!: Change default descriptions for connected endpoints and network ports by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4457
- Fix(eos_cli_config_gen)!: update logic in monitor_sessions to not require both source and destination by @carlbuchmann in https://github.com/aristanetworks/avd/pull/3823
- Refactor(eos_designs)!: Change default mlag interface descriptions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4464
- Fix(eos_cli_config_gen)!: Avoid generating invalid configuration for traffic policies by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4266
- Feat(eos_designs,eos_cli_config_gen)!: Change default encapsulation to path-selection for WAN iBGP EVPN peerings by @gmuloc in https://github.com/aristanetworks/avd/pull/4496
- Fix(eos_designs)!: Make evpn_gateway.remote_peers override work as documented by @gmuloc in https://github.com/aristanetworks/avd/pull/4510
- Refactor(eos_designs)!: Change MLAG VLAN names and SVI descriptions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4479
- Refactor(eos_designs)!: Change MLAG L3 VRF VLAN names and SVI descriptions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4514
- Refactor(eos_designs)!: Raise when a referenced profile name is not defined by @gmuloc in https://github.com/aristanetworks/avd/pull/4516
- Refactor(eos_designs)!: Change default BGP peer descriptions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4517
- Refactor(eos_designs)!: Change L3 P2P descriptions for uplinks and p2p_links by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4520
- Refactor(eos_designs)!: Change L2 uplink description by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4532
- Refactor(eos_designs)!: Change default VRF Diagnostic Loopback descriptions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4534
- Refactor(eos_cli_config_gen)!: Reorder hardware and hardware-counter commands by @gmuloc in https://github.com/aristanetworks/avd/pull/4580
- Fix(eos_designs)!: Endpoints PoE and 802.1x configuration for port-channel members by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4627

#### Fixed issues in eos_cli_config_gen

- Fix(eos_cli_config_gen): Fix router_isis rx_disabled and mode: shared-secret by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4267
- Fix(eos_cli_config_gen): Sort IPsec SA, IKE policies and profiles by @gmuloc in https://github.com/aristanetworks/avd/pull/4227
- Fix(eos_cli_config_gen): Use the correct VRF name for ip nat profile by @gmuloc in https://github.com/aristanetworks/avd/pull/4398
- Fix(eos_cli_config_gen): Remove primary key of system.control_plane.ipv4/6_access_group and make vrf key unique by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4465
- Fix(eos_cli_config_gen): Fix the command for next-hop mpls resolution in address-family evpn by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4490
- Fix(eos_cli_config_gen): Do not render entries with only sequence number from ip_access_list by @gmuloc in https://github.com/aristanetworks/avd/pull/4492
- Fix(eos_cli_config_gen): Fix wrong indentation of config for redistribute routes in `router_bgp.vrfs[].address_family_ipv6` by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4552
- Fix(eos_cli_config_gen): Fixing poe link down power-off action command in j2 template by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4576
- Fix(eos_cli_config_gen): Fix the maximum-routes, next-hop resolution v4-mapped-v6 translation commands in `router_bgp.address_family_ipv4_labeled_unicast` by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4567

#### Fixed issues in eos_designs

- Fix(eos_designs): Move schema for ipv4_prefix_list_catalog to pyavd for proper enforcement by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4322
- Fix(eos_designs): Do not render vrf default under router ospf by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4334
- Fix(eos_designs): Provide the proper kwarg to Ansible Display.warning() in schema tools by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/4345
- Fix(eos_designs): Better error message when missing 'evpn_multicast' for PIM l3 interfaces by @gmuloc in https://github.com/aristanetworks/avd/pull/4391
- Fix(eos_designs): Fix context vars for custom interface description templates by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4429
- Fix(eos_designs): Do not filter AVT on HA device if one path-group is present on peer by @gmuloc in https://github.com/aristanetworks/avd/pull/4463
- Fix(eos_designs): Fix schema validation of dynamic keys by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4474
- Fix(eos_designs): Use CP-Profile for WAN HA when DP-Profile is not configured by @gmuloc in https://github.com/aristanetworks/avd/pull/4309
- Fix(eos_designs): Add redistribute connected under BGP for VRF default if no underlay by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4522
- Fix(eos_designs): Make it possible to add custom PTP profiles by @gmuloc in https://github.com/aristanetworks/avd/pull/4523
- Fix(eos_designs): Fix the Invalid command of `vxlan vxlan vlan <vlan_id> flood vtep` by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4592

#### Fixed issues in both eos_designs and eos_cli_config_gen

- Fix(eos_cli_config_gen,eos_designs): Dont configure access group on interface when access group is defined on session level by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4565

#### Other Fixed issues

- Fix(cv_deploy): Fix async comprehensions in get_tags by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/4332
- Fix(eos_validate_state): Update documentation by @carl-baillargeon in https://github.com/aristanetworks/avd/pull/4350
- Fix(cv_deploy): Ensure 'AVD Configurations' container is inserted first by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4356
- Fix(cv_deploy): Fix Ansible Logging and increase API timeouts by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4357
- Fix(eos_validate_state): Ensure graceful handling of command errors from ANTA by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4385
- Fix(plugins): Support zeroes in interface numbers for range_expand by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4420

#### Documentation

- Doc: Placeholder PR for updating deprecated keys in 5.x.x porting-guide by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4285
- Doc(eos_cli_config_gen): Removing deprecation info from description as it was already removed by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4426
- Doc(eos_cli_config_gen): Add missing tables to input-variables by @gmuloc in https://github.com/aristanetworks/avd/pull/4469
- Doc(eos_designs): How-to guide and porting guide updates for description templates by @carlbuchmann in https://github.com/aristanetworks/avd/pull/4558
- Doc(eos_cli_config_gen): Fix new_key paths for router_bgp to raise errors in case of a key conflict by @alexeygorbunov in https://github.com/aristanetworks/avd/pull/4597
- Doc(eos_designs): Remove adapter native_vlan_tag unused default value by @gmuloc in https://github.com/aristanetworks/avd/pull/4602
- Doc: Porting guide review by @JulioPDX in https://github.com/aristanetworks/avd/pull/4575

#### New features and enhancements in eos_cli_config_gen

- Feat(eos_cli_config_gen): Add support for isis authentication on vlan interfaces by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4254
- Feat(eos_cli_config_gen): Extend GRE span with payload support by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4190
- Feat(eos_cli_config_gen): Add support for snmp-server ipmib ifspeed shape-rate by @gusmb in https://github.com/aristanetworks/avd/pull/4382
- Feat(eos_cli_config_gen): Add switchport data model by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4158
- Feat(eos_cli_config_gen): Enhance encapsulation schema/template for ethernet and port-channel interfaces by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4388
- Feat(eos_cli_config_gen): Set ssh authentication protocols and empty password by @jmussmann in https://github.com/aristanetworks/avd/pull/4436
- Feat(eos_cli_config_gen): Add support for additional dot1x commands. by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4191
- Feat(eos_cli_config_gen): Add support for port-channel local interfaces for router-path-selection by @gmuloc in https://github.com/aristanetworks/avd/pull/4475
- Feat(eos_cli_config_gen): add_hardware_port_group_knob by @ccsnw in https://github.com/aristanetworks/avd/pull/4500
- Feat(eos_cli_config_gen): Global logging keys for congestion-drops, link-status, and repeat-messages by @nathanmusser in https://github.com/aristanetworks/avd/pull/4493
- Feat(eos_cli_config_gen): Add support for IPv4 BGP Labeled-Unicast (BGP-LU) by @colinmacgiolla in https://github.com/aristanetworks/avd/pull/4412
- Feat(eos_cli_config_gen): Add support additional-paths to root context of BGP using new DM by @ccsnw in https://github.com/aristanetworks/avd/pull/4519
- Feat(eos_cli_config_gen): Redo the model for additional-paths in BGP by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/3730
- Feat(eos_cli_config_gen): Add permit_response_traffic nat to ip-access-lists by @gmuloc in https://github.com/aristanetworks/avd/pull/4545
- Feat(eos_cli_config_gen): Add trident l3 routing mac per vlan option  by @ccsnw in https://github.com/aristanetworks/avd/pull/4548

#### New features and enhancements in eos_designs

- Feat(eos_designs): Custom platform_settings and node_type_keys by @jonxstill in https://github.com/aristanetworks/avd/pull/3300
- Feat(eos_designs): Add support to enable sflow on l3 interfaces by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4444
- Feat(eos_designs): Update eos_designs code to generate new interface-encapsulation model in structured_configs by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4504
- Feat(eos_designs): Add possibility to change network mask for direct WAN HA link by @gmuloc in https://github.com/aristanetworks/avd/pull/4497
- Feat(eos_designs): Add support for Port-Channel for Direct HA by @gmuloc in https://github.com/aristanetworks/avd/pull/4482
- Feat(eos_designs): Configure l3 interfaces BGP peers even when underlay_bgp is False by @gmuloc in https://github.com/aristanetworks/avd/pull/4543

#### Other new features and enhancements

- Feat(plugins): Add strict mode and ignore_case flags to natural_sort filter by @gmuloc in https://github.com/aristanetworks/avd/pull/4298
- Feat(eos_validate_state): Added the validation for DPS interface reachability by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4154
- Feat(plugins): Add AVD String Formatter for later use in custom descriptions by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4432
- Feat(eos_validate_state): Added the validation for AVT path for static peers and role of device by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4200

#### Other Changes

- Bump: Minimum Python version 3.10 by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4276
- Cut(eos_cli_config_gen): Remove the deprecated keys for event-handlers by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4279
- Cut(eos_cli_config_gen): Remove deprecated key entropy_source from management_security data model by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4277
- Cut(eos_cli_config_gen): Remove the deprecated key local_interface from stun server data model by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4274
- Cut(eos_cli_config_gen): Remove deprecated key cvcompression from daemon_terminattr data model by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4288
- Cut(eos_cli_config_gen): Remove the deprecated keys for flow-trackings by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4294
- Cut(eos_cli_config_gen): Remove deprecated key MIB_family_name from snmp_server data model  by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4289
- Cut(eos_cli_config_gen,eos_designs): Remove deprecated jsonschema files by @gmuloc in https://github.com/aristanetworks/avd/pull/4299
- Refactor(eos_cli_config_gen): Remove error handling for missing name in hardware-counters by @gmuloc in https://github.com/aristanetworks/avd/pull/4302
- Cut(eos_designs): Remove deprecated keys marked `removed: true` in version 4.0.0 by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4312
- Cut(eos_designs): Remove deprecated keys from bgp_peer_groups by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4307
- Cut(eos_cli_config_gen): Remove the deprecated keys for vlan_interfaces  by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4305
- Cut: Remove deprecated Ansible plugins by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4291
- Refactor(eos_validate_state): Keep only ANTA mode in eos_validate_state by @gmuloc in https://github.com/aristanetworks/avd/pull/4286
- Cut(eos_cli_config_gen): Remove deprecated keys from router_bgp data model by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4311
- Cut(eos_cli_config_gen): Remove the deprecated keys for name-server by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4290
- Cut(eos_cli_config_gen): Remove deprecated keys enable_vrfs and octa  from management_api_gnmi data model by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4296
- Cut(eos_cli_config_gen): Remove deprecated data model radius_servers by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4295
- Cut(eos_cli_config_gen): Remove the deprecated keys for port-channel-interfaces by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4297
- Cut(eos_cli_config_gen): Remove deprecated keys `address_family` and `isis_af_defaults` from router-isis data model by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4278
- Cut(eos_designs): Remove deprecated key cvp_instance_ip by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4317
- Cut(eos_designs): Remove deprecated key short_esi by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4319
- Cut(eos_designs): Remove the deprecated ipv6_address_virtual key from SVI settings by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4314
- Cut(eos_designs): Remove deprecated ptp data model by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4316
- Cut(eos_cli_config_gen): Remove automatic conversion of dict-of-dicts to lists by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4320
- Cut(eos_designs): Remove automatic conversion of dict-of-dicts to lists by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4321
- Cut(eos_designs): Remove deprecated inband_management_subnet and inband_management_vlan keys by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4318
- Refactor(eos_designs): Add helper to retrieve ip from ip prefix by @gmuloc in https://github.com/aristanetworks/avd/pull/4306
- Cut(plugins): Remove convert_dicts filter plugin and integrations into schema tooling by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4323
- Refactor(eos_cli_config_gen): Deprecate Upper case letter Vxlan1 to vxlan1 for vxlan_interface schema by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4250
- Cut(eos_cli_config_gen): Removing 'null' as valid value of esp integrity and encryption from ip-security module by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4336
- Refactor(eos_designs): Remove legacy interface_descriptions function by @gmuloc in https://github.com/aristanetworks/avd/pull/4300
- Refactor(eos_designs,eos_cli_config_gen): Default validation_mode to error and remove conversion_mode by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4327
- Feat(eos_designs, eos_validate_state): Updated the upper case letter Vxlan1 to vxlan1 for vxlan_interfaces structure config by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4347
- Refactor(eos_designs): Deprecate `design.type`  and combine default `node_type_keys` by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4340
- Refactor(eos_designs): Optimize eos_designs_structured_config file write by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4283
- Refactor(eos_cli_config_gen): Remove type column from the documentation of ethernet-interfaces and port-channel-interfaces by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4363
- Refactor(eos_cli_config_gen): Remove EOS default configuration by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4361
- Refactor(plugins): Remove jsonschema dependency by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4348
- Bump: Python library cvprac>=1.4.0 by @carlbuchmann in https://github.com/aristanetworks/avd/pull/4369
- Refactor(eos_designs): Optimize handling of WAN internet exits by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4372
- Refactor(eos_cli_config_gen): Allow duplicate value of `address` in `router_pim_sparse_mode.rp_addresses` by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4366
- Refactor(eos_cli_config_gen): Deprecate `community_lists` data model by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4396
- Refactor(eos_cli_config_gen): Remove hack for ansible 2.12 for arp by @gmuloc in https://github.com/aristanetworks/avd/pull/4404
- Refactor(eos_designs): Move documentation to Python by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4364
- Refactor(eos_designs): Move default platform_settings. network_services_keys and connected_endpoints_keys to schema by @gmuloc in https://github.com/aristanetworks/avd/pull/4395
- Refactor(eos_cli_config_gen): Deprecation of `type` key from ethernet and port-channel interfaces by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4416
- Refactor(cv_deploy): Optimize push of configlets with version aware API calls by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4419
- Refactor(eos_cli_config_gen): Rearrange eos-intended-config based on eos cli by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4411
- Refactor(eos_designs): Remove "preview" from flow_tracking_settings by @gmuloc in https://github.com/aristanetworks/avd/pull/4472
- Refactor(eos_designs): Use VRF ID instead of VRF VNI as offset for evpn underlay l3 multicast group by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4450
- Cut: Remove Ansible tags from AVD roles by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4427
- Refactor(eos_cli_config_gen): Rearrange the eos-cli output to match eos order by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4381
- Refactor(eos_cli_config_gen): Rearrange the eos-cli output to match eos order part 2 by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4449
- Refactor(eos_cli_config_gen): Change the 'protocol' key to 'encapsulation' in interfaces-encapsulation model by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4509
- Refactor(eos_cli_config_gen): Rearrange the eos-cli output to match eos order part-3 by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4462
- Refactor(eos_cli_config_gen): Rearrange `eos_cli_config_gen` output to match with EOS - Part 4 by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4487
- Refactor(eos_designs): Change default of redistribute_mlag_ibgp_peering_vrfs to false by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4499
- Refactor(eos_cli_config_gen): Rearrange the order of `management api http` in eos-intended-config based on eos cli by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4535
- Refactor(eos_cli_config_gen): Improve schema for redistributes_routes under address_family_ipv4_multicast, address_family_ipv6 and vrfs for router_bgp by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4359
- Refactor(eos_designs): Move debug vars dump to action plugin instead of it's own task by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4540
- Refactor(eos_cli_config_gen): Rearrange the eos-cli config for `vlan-interfaces` to match with EOS by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4488
- Refactor(eos_cli_config_gen): Rearrange the eos-cli output to match eos order - Part 6 by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4546
- Refactor(eos_cli_config_gen): Rearrange the eos-cli output to match eos order for router-isis by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4555
- Refactor(eos_designs): Setting ospf.area default values to 0.0.0.0 by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4536
- Refactor(eos_designs): Better error messages for missing keys by @gmuloc in https://github.com/aristanetworks/avd/pull/4541
- Refactor(eos_cli_config_gen): Improve schemas with `primary_key/required` by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4563
- Refactor(plugins): Emit errors when both deprecated and new keys are set by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4562
- Refactor(eos_cli_config_gen): Improved redistribute data models under router_bgp by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4550
- Refactor(eos_cli_config_gen): Rearrange generated CLI for qos queues under interfaces and qos_profiles by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4579
- Refactor(eos_cli_config_gen): Rearrange the CLI for platform by @ClausHolbechArista in https://github.com/aristanetworks/avd/pull/4578
- Refactor(eos_cli_config_gen): Rearrange the eos-cli config for router-bgp to match with EOS by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4566
- Refactor(eos_cli_config_gen): Rearrange eos_cli_config_gen commands to match with EOS sequence - Part 5 by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4549
- Refactor(eos_designs): Changed the redistribute_routes data model by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4544
- Refactor(eos_cli_config_gen): Rearrange eos_cli output to match with eos for `port-channel-interfaces` by @laxmikantchintakindi in https://github.com/aristanetworks/avd/pull/4557
- Bump: anta>=1.1.0 by @carlbuchmann in https://github.com/aristanetworks/avd/pull/4586
- Refactor(eos_cli_config_gen): Rearrange the eos-cli config for tap-aggregation to match with EOS by @Shivani-gslab in https://github.com/aristanetworks/avd/pull/4585
- Refactor(eos_cli_config_gen): Rearrange the eos-cli config for ethernet-interfaces to match with EOS by @Vibhu-gslab in https://github.com/aristanetworks/avd/pull/4569
- Refactor(eos_cli_config_gen): Rearrange generated CLI for `traffic-policies`, `system` and `static-routes` by @MaheshGSLAB in https://github.com/aristanetworks/avd/pull/4590
- Cut: Remove deprecated deploy_to_cv role by @gmuloc in https://github.com/aristanetworks/avd/pull/4609
