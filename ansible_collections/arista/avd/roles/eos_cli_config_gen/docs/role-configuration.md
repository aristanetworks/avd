---
# This title is used for search results
title: Role configuration for eos_cli_config_gen
---
<!--
  ~ Copyright (c) 2023-2024 Arista Networks, Inc.
  ~ Use of this source code is governed by the Apache License 2.0
  ~ that can be found in the LICENSE file.
  -->

# Role configuration for eos_cli_config_gen

Role configuration settings can be set either as regular inventory variables or directly as task_vars on the `import_role` task.

## Role default output directories

Default output directories can be updated by modifying the default role variables:

``` yaml
--8<--
roles/eos_cli_config_gen/defaults/main/output_directories.yml
--8<--
```

!!! tip
    You might need the outputs generated by AVD in a different folder than inventory (the default). If updating `root_dir`, leverage a relative path from `inventory_dir` to ensure consistent behavior. Example: `root_dir: '{{ inventory_dir}}/../outputs'`.

## Input Variables Validation settings

Schema validation is built in to the central Action plugins used in AVD. Each plugin runs variable type conversion first and then
performs validation of the converted data.

By default any data validation issues will trigger errors - blocking further processing.
This behavior can be adjusted by setting the variable described below.

!!! danger
    The input variable `avd_data_validation_mode` now has a default value of `error`, and while it can be set to `warning`, this is highly discouraged.
    All AVD code relies on the validation to ensure valid data, so the code assumes that the data is valid.

    If the validation mode is set to `warning`, execution will continue with invalid data, which can lead to hard-to-read errors or incorrect behavior.

--8<--
roles/eos_cli_config_gen/docs/tables/role-input-validation.md
--8<--

## Extensibility with Custom Templates

- Custom templates can be added below the playbook directory.
- If a location above the directory is desired, a symbolic link can be used.
- Example under the `playbooks` directory create symbolic link with the following command:

  ```bash
  ln -s ../../shared_repo/custom_avd_templates/ ./custom_avd_templates
  ```

- The output will be rendered at the end of the configuration.
- The order of custom templates in the list can be important if they overlap.
- It is recommenended to use a `!` delimiter at the top of each custom template.

!!! tip
    The templates will have any host or group variable available to it.
    If adding custom keys to an existing AVD data model, start the key with an underscore `_`, so it will be ignored by schema validation.

--8<--
roles/eos_cli_config_gen/docs/tables/custom-templates.md
--8<--

## Generation of device configuration and documentation

The following settings can be leveraged to control generation of device configuration and documentation.

--8<--
roles/eos_cli_config_gen/docs/tables/role-settings.md
--8<--

### Generate default config

The `generate_default_config` setting controls the generation of some default EOS configurations.

This is historic behavior which has been disabled by default in AVD 5.0.0 and will be removed in AVD 6.0.0.
Instead it is recommended to build structured config according to the intended output configurations.

The following commands will be generated when `generate_default_config` is set to `true`:

- RANCID Content Type
- Hostname (even if `hostname` variable is not set. Then the hostname is picked up from `inventory_hostname`)
- Default configuration `no aaa root`
- Default configuration `no enable password`
- Transceiver qsfp default mode
- End of configuration delimiter

--8<--
roles/eos_cli_config_gen/docs/tables/generate-default-config.md
--8<--
