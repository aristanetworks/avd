# Copyright (c) 2023-2024 Arista Networks, Inc.
# Use of this source code is governed by the Apache License 2.0
# that can be found in the LICENSE file.
# yaml-language-server: $schema=../../../../plugins/plugin_utils/schema/avd_meta_schema.json
# Line above is used by RedHat's YAML Schema vscode extension
# Use Ctrl + Space to get suggestions for every field. Autocomplete will pop up after typing 2 letters.
type: dict
keys:
  cv_tags_enabled:
    documentation_options:
      table: cloudvision-tags
    type: bool
    default: False
    description: |
        Enable the generation of CloudVision tags that can be applied using the `cloudvision` role. If not defined, the value is assumed to be False and no tags are generated.
  cv_tags_topology_type:
    documentation_options:
      table: cloudvision-tags
    description: |
      Device type that CloudVision should use when generating the Topology.
    type: str
    valid_values:
      - "leaf"
      - "spine"
      - "core"
      - "edge"
  cv_tags_generate_interface:
    documentation_options:
      table: cloudvision-tags
    description: |
      List of interface tags that should be generated from
      structured configuration.
    type: list
    items:
      type: dict
      keys:
        name:
          description: |
            Tag name to be assigned to generated tags.
          convert_to_lower_case: true
          required: true
          type: str
        data_path:
          description: |
            Structured config field/key path to be used to find the value for the tag. Dot notation is supported to reference values inside dictionaries.
            For Example: 'data_path: channel_group.id' would set the tag with the value of the channel id of the interface. If there is no channel id, the tag is not created.
          required: true
          type: str

  cv_tags_generate_device:
    documentation_options:
      table: cloudvision-tags
    description: |
      List of device tags that should be generated from
      structured configuration.
    type: list
    items:
      type: dict
      keys:
        name:
          description: |
            Tag name to be assigned to generated tags.
          convert_to_lower_case: true
          required: true
          type: str
        data_path:
          description: |
            Structured config field/key path to be used to find the value for the tag. Dot notation is supported to reference values inside dictionaries.
            For Example: 'data_path: router_bfd.multihop.interval' would set the tag with the value of the interval for multihop bfd. If this value is not specified in the structured config, the tag is not created.
          required: true
          type: str

  cv_tags_device_custom:
    documentation_options:
      table: cloudvision-tags
    description: |
      List of user defined tags and their values to be applied to this
      device on CVP.
    type: list
    items:
      type: dict
      keys:
        name:
          description: |
            Tag name to be assigned to generated tag.
          required: true
          type: str
          convert_to_lower_case: true
        value:
          description: |
            Value to be assigned to the tag.
          required: true
          type: str
