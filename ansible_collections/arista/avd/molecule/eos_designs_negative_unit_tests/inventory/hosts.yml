---
all:
  children:
    EOS_DESIGNS_FACTS_FAILURES: # Add cases that fail during 'eos_designs_facts' phase.
      # Each case _must_ be in it's own 'fabric' group set as 'fabric_name' in the hostvars
      # Each case must be added to converge.yml as a separate play - otherwise the eos_designs_facts fabric_name check will fail.
      children:
        FABRIC_MISSING_MLAG_PEER:
          hosts:
            missing-mlag-peer:
        FABRIC_IP_ADDRESSING_MLAG_ODD_ID:
          hosts:
            mlag_odd_id_oddodd1:
            mlag_odd_id_oddodd2:
        FABRIC_IP_ADDRESSING_MLAG_SAME_SUBNET:
          hosts:
            mlag_same_subnet_1:
            mlag_same_subnet_2:
        FABRIC_INVALID_SCHEMA:
          hosts:
            invalid-schema:
        FABRIC_INVALID_SCHEMA_CONNECTED_ENDPOINTS:
          hosts:
            invalid-schema-connected-endpoints:
        FABRIC_INVALID_UPLINK_PORT_CHANNEL_ID_1:
          hosts:
            invalid-uplink-port-channel-id-l3leaf-1:
            invalid-uplink-port-channel-id-l3leaf-2:
            invalid-uplink-port-channel-id-l2leaf-1:
            invalid-uplink-port-channel-id-l2leaf-2:
        FABRIC_INVALID_UPLINK_PORT_CHANNEL_ID_2:
        # Notice the same hosts since all vars are given in group var
          hosts:
            invalid-uplink-port-channel-id-l3leaf-1:
            invalid-uplink-port-channel-id-l3leaf-2:
            invalid-uplink-port-channel-id-l2leaf-1:
            invalid-uplink-port-channel-id-l2leaf-2:
        FABRIC_INVALID_UPLINK_PORT_CHANNEL_ID_3:
        # Notice the same hosts since all vars are given in group var
          hosts:
            invalid-uplink-port-channel-id-l3leaf-1:
            invalid-uplink-port-channel-id-l3leaf-2:
            invalid-uplink-port-channel-id-l2leaf-1:
            invalid-uplink-port-channel-id-l2leaf-2:
        FABRIC_WAN_ROLE_OVERLAY_ROUTING_PROTOCOL:
          hosts:
            invalid-wan-role-overlay-routing-protocol:
        FABRIC_P2P_VRFS:
          hosts:
            invalid-uplink-type-p2p-vrfs-underlay-router-false:
        FABRIC_DOWNLINK_POOLS_MISSING:
          hosts:
            downlink-pools-missing-spine:
            downlink-pools-missing-l3leaf:
        FABRIC_DOWNLINK_POOLS_DUPLICATE:
          hosts:
            downlink-pools-duplicate-spine:
            downlink-pools-duplicate-l3leaf:
    EOS_DESIGNS_FAILURES: # Add cases that fail during 'eos_designs_structured_config' phase
      children:
        EOS_DESIGNS_FAILURES_INCLUDED:
          hosts:
            failure-port-channel:
            connected-endpoints-mismatched-descriptions:
            connected-endpoints-missing-profile-lacp-fallback:
            connected-endpoints-wrong-profile-lacp-fallback:
            connected-endpoints-phone-vlan-mode:
            connected-endpoints-phone-vlan-vlans:
            connected-endpoints-monitor-sessions-mismatch-direction:
            duplicate-vlans-l2vlans:
            duplicate-vlans-svi-id:
            duplicate-vrfs-duplicate-svi-name-conflict:
            duplicate-vrfs-id-conflict:
            duplicate-vrfs-vni-conflict:
            duplicate-vrfs-tenant-igmp-snooping-conflict:
            duplicate-interface-l3-edge:
            duplicate-l3-interfaces-network-services:
            duplicate-peer-ip-address-network-services:
            duplicate-interfaces-point-to-point-services-1:
            duplicate-interfaces-point-to-point-services-2:
            duplicate-interfaces-point-to-point-services-3:
            duplicate-interfaces-point-to-point-services-4:
            duplicate-interfaces-connected-endpoints:
            duplicate-interfaces-core-interfaces:
            duplicate-interfaces-core-interfaces-with-port-channel:
            duplicate-vni-vxlan-interface:
            duplicate-vni-l3-interfaces-in-vxlan-interface:
            duplicate-vni-l2vlans-vxlan-interface:
            duplicate-interfaces-underlay:
            duplicate-ip-address-uplink-switch-router-bgp:
            duplicate-tunnel-interface-internet-exit:
            failure-adapter-ptp-profile-does-not-exist:
            failure-connected-endpoint-port-profile-does-not-exist:
            failure-connected-endpoint-parent-port-profile-does-not-exist:
            failure-duplicate-evpn-vlan-bundle-name:
            failure-missing-evpn-vlan-bundle:
            failure-missing-evpn-vlan-bundle_svi:
            failure-missing-evpn-multicast-l3-with-pim:
            failure-missing-evpn-multicast-peg-rps:
            failure-missing-evpn-multicast-with-pim:
            failure-network-port-ptp-profile-does-not-exist:
            failure-no-local-path-group-in-default-policy:
            failure-ptp-profile-does-not-exist:
            failure-svi-parent-profile-does-not-exist:
            failure-svi-grandparent-profile-does-not-exist:
            ipv4-acl-in-missing-on-wan-interface:
            ipv4-acls:
            isis-system-id-format-missing-node-id:
            missing-avt-id-cv-pathfinder:
            missing-prefix-list-in-cv-pathfinder:
            missing-prefix-list-definition-cv-pathfinder:
            missing-data-plane_cpu-allocation-max:
            missing-key-evpn-gateway-remote-peer:
            ntp-settings-server-vrf-missing-mgmt-ip:
            ntp-settings-server-vrf-missing-inband-mgmt-interface:
            source-interfaces-domain-lookup-duplicate-vrf:
            source-interfaces-domain-lookup-missing-inband-mgmt-interface:
            source-interfaces-domain-lookup-missing-mgmt-ip:
            source-interfaces-http-client-duplicate-vrf:
            source-interfaces-http-client-missing-inband-mgmt-interface:
            source-interfaces-http-client-missing-mgmt-ip:
            source-interfaces-radius-duplicate-vrf:
            source-interfaces-radius-missing-inband-mgmt-interface:
            source-interfaces-radius-missing-mgmt-ip:
            source-interfaces-ssh-client-duplicate-vrf:
            source-interfaces-ssh-client-missing-inband-mgmt-interface:
            source-interfaces-ssh-client-missing-mgmt-ip:
            source-interfaces-tacacs-duplicate-vrf:
            source-interfaces-tacacs-missing-inband-mgmt-interface:
            source-interfaces-tacacs-missing-mgmt-ip:
            ul-filter-evpn-default-vrf-services:
            sflow-settings-missing-destinations:
            sflow-settings-missing-inband-mgmt-interface:
            sflow-settings-missing-mgmt-ip:
            core-interfaces-p2p-links-as:

          children:
            DUPLICATE_VLANS_MLAG:
              hosts:
                duplicate-vlans-mlag-a:
                duplicate-vlans-mlag-b:

        EOS_DESIGNS_FAILURES_EXCLUDED:
          # These hosts are included in the vars and facts, but will not be included in the structured config run,
          # since they are not present to trigger a failure on a different device.
          children:
            DUPLICATE_IP_ADDRESS_ROUTER_BGP:
              hosts:
                duplicate-ip-address-1:
                duplicate-ip-address-2:
